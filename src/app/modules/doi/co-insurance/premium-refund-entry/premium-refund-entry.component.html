<div class="container">
  <div class="form-wrapper">

    <!-- heading section -->
    <div class="heading-section ng-star-inserted">
      <div>Premium Refund Policy</div>
      <div class="font-heading"><strong>Reference Number:</strong> 19-20/DOI/DB/CE/001</div>
      <div class="font-heading"><strong>Reference Date:</strong> {{ todayDate | date: 'dd-MMM-yyyy HH:mm'}}
      </div>
    </div>

    <!-- navigation start -->
    <nav aria-label="breadcrumb">
      <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="#">Home</a></li>
        <li class="breadcrumb-item " aria-current="page">DOI </li>
        <li class="breadcrumb-item " aria-current="page">Co-Insurance </li>

        <li class="breadcrumb-item active" aria-current="page">Premium Refund Policy</li>
      </ol>
    </nav>
    <!-- navigation ends -->



    <div class="panel-group">
      <!--  Co-Insuance Claim Entry  Form-->
      <form [formGroup]="premiumRefundEntryForm">

        <div class="box box-primary">
          <div class="box-header">Premium Refund Policy</div>
          <div class="box-body">

            <div class="row">
              <div class="col-sm-3">
                <mat-form-field>
                  <input matInput formControlName="gIFPremiumRefundNo" placeholder="GIF Premium Refund No">
                </mat-form-field>
              </div>
              <!-- name -->
              <div class="col-sm-3">
                <mat-form-field class="full-width">
                  <mat-select formControlName="name" placeholder="Leader Name" required>
                    <mat-option>
                      <ngx-mat-select-search [formControl]="nameCtrl" [placeholderLabel]="'Find Leader Name...'"
                        [noEntriesFoundLabel]="'No matching Leader Name found'">
                      </ngx-mat-select-search>
                    </mat-option>
                    <mat-option *ngFor="let item of nameList | filterSelectInput:nameCtrl.value" [value]="item.value"
                      matTooltip="{{item.viewValue}}">
                      {{item.viewValue}}
                    </mat-option>
                  </mat-select>
                  <div class="error-wrapper"
                    *ngIf="premiumRefundEntryForm.controls.name.touched && (premiumRefundEntryForm.controls.name.errors)">
                    <mat-error *ngIf="premiumRefundEntryForm.controls.name.errors.required">
                      {{errorMessage.LEADER_NAME_DROPDOWN}}
                    </mat-error>
                  </div>
                </mat-form-field>
              </div>

              <!-- policy no -->
              <div class="col-sm-3">
                <mat-form-field class="full-width">
                  <mat-select formControlName="policyNo" placeholder="Policy No."
                    (selectionChange)="onPolicyNoSelection($event)">
                    <mat-option>
                      <ngx-mat-select-search [formControl]="policyNoCtrl" [placeholderLabel]="'Find Policy No....'"
                        [noEntriesFoundLabel]="'No matching Policy No. found'">
                      </ngx-mat-select-search>
                    </mat-option>
                    <mat-option *ngFor="let item of policyNoList | filterSelectInput:policyNoCtrl.value"
                      [value]="item.value" matTooltip="{{item.viewValue}}">
                      {{item.viewValue}}
                    </mat-option>
                  </mat-select>
                  <div class="error-wrapper"
                    *ngIf="premiumRefundEntryForm.controls.policyNo.touched && (premiumRefundEntryForm.controls.policyNo.errors)">
                    <mat-error *ngIf="premiumRefundEntryForm.controls.policyNo.errors.required">
                      {{errorMessage.POLICY_NO_SELECT}}
                    </mat-error>
                  </div>
                </mat-form-field>
              </div>

              <div class="col-sm-3" *ngIf="premiumRefundEntryForm.controls.policyNo.value!=''">
                <mat-form-field>
                  <input matInput formControlName="chNo" placeholder="Challan No.">
                </mat-form-field>
              </div>
              
              <div class="col-sm-3" *ngIf="premiumRefundEntryForm.controls.policyNo.value!=''">
                <mat-form-field>
                  <input matInput [matDatepicker]="chDate" formControlName="chDate"
                    placeholder="Challan Date">
                  <mat-datepicker-toggle matSuffix [for]="chDate"></mat-datepicker-toggle>
                  <mat-datepicker #chDate></mat-datepicker>
                </mat-form-field>
              </div>

              <!-- policy start date -->
              <div class="col-sm-3">
                <mat-form-field>
                  <input matInput [matDatepicker]="policyStartDate" formControlName="policyStartDate"
                    placeholder="Policy Start Date">
                  <mat-datepicker-toggle matSuffix [for]="policyStartDate"></mat-datepicker-toggle>
                  <mat-datepicker #policyStartDate></mat-datepicker>
                </mat-form-field>
              </div>

              <!-- policy end date -->
              <div class="col-sm-3">
                <mat-form-field>
                  <input matInput [matDatepicker]="policyEndDate" formControlName="policyEndDate"
                    placeholder="Policy End Date">
                  <mat-datepicker-toggle matSuffix [for]="policyEndDate"></mat-datepicker-toggle>
                  <mat-datepicker #policyEndDate></mat-datepicker>
                </mat-form-field>
              </div>

              <!-- insured name -->
              <div class="col-sm-3">
                <mat-form-field>
                  <input matInput formControlName="insuredName" placeholder="Insured Name">
                </mat-form-field>
              </div>

              <!-- premium amount -->
              <div class="col-sm-3">
                <mat-form-field>
                  <input matInput formControlName="premiumAmount" placeholder="Premium Amount">
                </mat-form-field>
              </div>

              <!-- refund amount -->
              <div class="col-sm-3">
                <mat-form-field>
                  <input matInput formControlName="refundAmount" placeholder="Refund Amount">
                  <div class="error-wrapper"
                    *ngIf="premiumRefundEntryForm.controls.refundAmount.touched && (premiumRefundEntryForm.controls.refundAmount.errors)">
                    <mat-error *ngIf="premiumRefundEntryForm.controls.refundAmount.errors.required">
                      {{errorMessage.REFUND_AMOUNT}}
                    </mat-error>
                  </div>
                </mat-form-field>
              </div>

              <!-- refund amount words -->
              <div class="col-sm-3">
                <mat-form-field>
                  <input matInput formControlName="refundAmountWords" placeholder="Refund Amount (Words)">
                </mat-form-field>
              </div>

              <!-- reason -->
              <div class="col-sm-3">
                <mat-form-field>
                  <input matInput formControlName="reason" placeholder="Reason">
                </mat-form-field>
              </div>


              <div class="col-sm-3">
                <mat-form-field class="full-width">
                  <mat-select formControlName="majorHead" placeholder="Major Head" required>
                    <mat-option>
                      <ngx-mat-select-search [formControl]="majorHeadCtrl" [placeholderLabel]="'Find Major Head...'"
                        [noEntriesFoundLabel]="'no matching Major Head found'">
                      </ngx-mat-select-search>
                    </mat-option>
                    <mat-option *ngFor="let majorhead of majorHead_list | filterSelectInput: majorHeadCtrl.value"
                      [value]="majorhead.value" [matTooltip]="majorhead.viewValue">
                      {{majorhead.viewValue}}
                    </mat-option>
                  </mat-select>
                  <div class="error-wrapper"
                    *ngIf="premiumRefundEntryForm.controls.majorHead.touched && (premiumRefundEntryForm.controls.majorHead.errors)">
                    <mat-error *ngIf="premiumRefundEntryForm.controls.majorHead.errors.required">
                      {{errorMessage.MAJOR_HEAD}}
                    </mat-error>
                  </div>
                </mat-form-field>
              </div>

              <div class="col-sm-3">
                <mat-form-field class="full-width">
                  <mat-select formControlName="subMajorHead" placeholder="Sub Major Head" required>
                    <mat-option>
                      <ngx-mat-select-search [formControl]="subMajorHeadCtrl"
                        [placeholderLabel]="'Find Sub Major Head...'"
                        [noEntriesFoundLabel]="'no matching Sub Major Head found'">
                      </ngx-mat-select-search>
                    </mat-option>
                    <mat-option *ngFor="let item of subMajorHeadList | filterSelectInput: subMajorHeadCtrl.value"
                      [value]="item.value" [matTooltip]="item.viewValue">
                      {{item.viewValue}}
                    </mat-option>
                  </mat-select>
                  <div class="error-wrapper"
                    *ngIf="premiumRefundEntryForm.controls.subMajorHead.touched && (premiumRefundEntryForm.controls.subMajorHead.errors)">
                    <mat-error *ngIf="premiumRefundEntryForm.controls.subMajorHead.errors.required">
                      {{errorMessage.SUB_MAJOR_HEAD}}
                    </mat-error>
                  </div>
                </mat-form-field>
              </div>

              <div class="col-sm-3">
                <mat-form-field class="full-width">
                  <mat-select formControlName="minorHead" placeholder="Minor Head" required>
                    <mat-option>
                      <ngx-mat-select-search [formControl]="minorHeadCtrl" [placeholderLabel]="'Find Minor Head...'"
                        [noEntriesFoundLabel]="'no matching Minor Head found'">
                      </ngx-mat-select-search>
                    </mat-option>
                    <mat-option *ngFor="let minorhead of minorHead_list | filterSelectInput: minorHeadCtrl.value"
                      [value]="minorhead.value" [matTooltip]="minorhead.viewValue">
                      {{minorhead.viewValue}}
                    </mat-option>
                  </mat-select>
                  <div class="error-wrapper"
                    *ngIf="premiumRefundEntryForm.controls.minorHead.touched && (premiumRefundEntryForm.controls.minorHead.errors)">
                    <mat-error *ngIf="premiumRefundEntryForm.controls.minorHead.errors.required">
                      {{errorMessage.MINOR_HEAD}}
                    </mat-error>
                  </div>
                </mat-form-field>
              </div>
              <div class="col-md-3">
                <mat-form-field>
                  <input matInput formControlName="endorsementNo" placeholder="Endorsement No">
                </mat-form-field>
              </div>
              <div class="col-sm-3">
                <mat-form-field>
                  <input matInput [matDatepicker]="endorsementDate" formControlName="endorsementDate"
                    placeholder="Endorsement Date">
                  <mat-datepicker-toggle matSuffix [for]="endorsementDate"></mat-datepicker-toggle>
                  <mat-datepicker #endorsementDate></mat-datepicker>
                </mat-form-field>
              </div>
            </div>

          </div>

          <div class="form-action-button">

            <button type="submit" mat-raised-button color="primary" (click)="addRecord()" title="Add">
              <i class="material-icons" aria-hidden="true"> add </i>
              Add
            </button>

            <button type="reset" mat-raised-button color="accent" title="Reset">
              <i class="material-icons" title="Reset" aria-hidden="true">restore</i>
              Reset
            </button>

          </div>

        </div>
      </form>

      <div class="mt-3">
        <!-- table -->
        <table mat-table [dataSource]="dataSource" class="mat-elevation-z8 mt-2">

          <ng-container matColumnDef="leaderName">
            <th mat-header-cell *matHeaderCellDef scope="row">Leader Name</th>
            <td mat-cell *matCellDef="let element">
              {{element.leaderName}}
            </td>
          </ng-container>

          <ng-container matColumnDef="policyNo">
            <th mat-header-cell *matHeaderCellDef scope="row">Policy No</th>
            <td mat-cell *matCellDef="let element">
              {{element.policyNo}}
            </td>
          </ng-container>

          <ng-container matColumnDef="period">
            <th mat-header-cell *matHeaderCellDef scope="row">Period</th>
            <td mat-cell *matCellDef="let element">
              {{element.period}}
            </td>
          </ng-container>

          <ng-container matColumnDef="premiumAmount">
            <th mat-header-cell *matHeaderCellDef scope="row">Premium Amount</th>
            <td mat-cell *matCellDef="let element">
              {{element.premiumAmount}}
            </td>
          </ng-container>

          <ng-container matColumnDef="refundAmount">
            <th mat-header-cell *matHeaderCellDef scope="row">Refund Amount</th>
            <td mat-cell *matCellDef="let element">
              {{element.refundAmount}}
            </td>
          </ng-container>

          <ng-container matColumnDef="reason">
            <th mat-header-cell *matHeaderCellDef scope="row">Reason</th>
            <td mat-cell *matCellDef="let element">
              {{element.reason}}
            </td>
          </ng-container>

          <ng-container matColumnDef="majorHead">
            <th mat-header-cell *matHeaderCellDef scope="row">Major Head</th>
            <td mat-cell *matCellDef="let element">
              {{element.majorHead}}
            </td>
          </ng-container>

          <ng-container matColumnDef="subMajorHead">
            <th mat-header-cell *matHeaderCellDef scope="row">Sub Major Head</th>
            <td mat-cell *matCellDef="let element">
              {{element.subMajorHead}}
            </td>
          </ng-container>

          <ng-container matColumnDef="minorHead">
            <th mat-header-cell *matHeaderCellDef scope="row">Minor Head</th>
            <td mat-cell *matCellDef="let element">
              {{element.minorHead}}
            </td>
          </ng-container>


          <ng-container matColumnDef="action">
            <th mat-header-cell *matHeaderCellDef scope="row"> Action </th>
            <td mat-cell *matCellDef="let element; let i= index;" class="text-center">
              <a><i class="material-icons plus edit-icon mr-2" title="Edit" (click)="edit()"> edit </i></a>
              <a><i class="material-icons plus delete-icon mr-2" title="Delete" (click)="delete(i)">delete</i></a>
            </td>
          </ng-container>
          <!-- Header Section Of table -->
          <tr mat-header-row *matHeaderRowDef="columns"></tr>
          <!-- Data Fetch From .TS File to table -->
          <tr mat-row *matRowDef="let row; columns: columns;"></tr>
        </table>

        <mat-paginator [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons></mat-paginator>

      </div>

      <!-- common action button -->
      <div class="form-action-button">

        <button type="submit" mat-raised-button color="primary">
          <i aria-hidden="true" class="material-icons" title="Save">
            save
          </i>
          Save as Draft
        </button>

        <button mat-raised-button type="submit" class="green" title="Submit" (click)="onSubmit()">
          <i class="material-icons">
            done
          </i>
          Submit
        </button>

        <button type="button" mat-raised-button color="accent" title="Reset" (click)="onReset()">
          <i class="material-icons" aria-hidden="true">
            restore
          </i>
          Reset
        </button>

        <button type="button" mat-raised-button (click)="goToListing()" color="warn" title="Listing">
          <i class="material-icons" aria-hidden="true" title="Listing">
            list
          </i>
          Listing
        </button>

        <button type="button" mat-raised-button (click)="onCloseClaimEntry()" class="btnClose" title="Close">
          <i class="material-icons" aria-hidden="true" title="Close">
            close
          </i>
          Close
        </button>

      </div>
      <!-- common action button end -->
    </div>

  </div>
</div>