<div class="container">
    <div class="form-wrapper">
        <!-- Screen Name, Reference No and Reference Date Header -->
        <div class="heading-section ng-star-inserted">
            <div>LC Account Opening Request</div>
            <div class="font-heading"><strong>Reference No:</strong> {{ referenceNo }}</div>
            <div class="font-heading">
                <strong>Reference Date:</strong>
                {{ (referenceDt ? (referenceDt | date: 'dd-MMM-yyyy hh:mm:ss a') : referenceDt)}}
            </div>
        </div>

        <!-- Breadcrumb -->
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="javascript:void(0)">Home</a></li>
                <li class="breadcrumb-item " aria-current="page"><a href="javascript:void(0)">LC</a></li>
                <li class="breadcrumb-item active" aria-current="page">LC Account Opening Request</li>
            </ol>
        </nav>


        <div class="panel-group">
            <mat-tab-group mat-stretch-tabs [selectedIndex]="selectedTabIndex"
                (selectedIndexChange)="getTabIndex($event)">
                <!-- Mat Tab for LC Opening Starts -->
                <mat-tab>
                    <ng-template mat-tab-label>
                        LC Account Opening Request
                    </ng-template>
                    <div class="box box-primary">
                        <div class="box-header">
                            LC Account Opening Request

                            <!--Adding View History button for LC Account Opening Request-->

                            <a *ngIf="hdrId" class="hyper-link" (click)="historyDialogView('forLCAccountOpeningRequest')">
                                View History</a>
                        </div>
                        <div class="box-body">
                            <form [formGroup]="lcOpeningRequestCreateForm"
                                (ngSubmit)="lcOpeningRequestCreateFormData()">
                                <div class="row">
                                    <!-- Input Field for Office Name -->
                                    <div class="col-sm-3">
                                        <mat-form-field>
                                            <input matInput placeholder="Office Name" formControlName="officeName"
                                            matTooltip={{lcOpeningRequestCreateForm.value.officeName}} readonly />
                                        </mat-form-field>
                                    </div>

                                    <!-- Input Field for Division Office Address -->
                                    <div class="col-sm-3">
                                        <mat-form-field>
                                            <textarea matInput formControlName="divisionOfficeAddress"
                                                placeholder="Office Address" cdkTextareaAutosize cdkAutosizeMinRows="3"
                                                matTooltip={{lcOpeningRequestCreateForm.value.divisionOfficeAddress}}  readonly></textarea>
                                        </mat-form-field>
                                    </div>

                                    <!-- Input Field for Administrative Department -->
                                    <div class="col-sm-3">
                                        <mat-form-field>
                                            <textarea matInput formControlName="administrativeDepartment"
                                                placeholder="Administrative Department" cdkTextareaAutosize
                                                cdkAutosizeMinRows="3"   matTooltip={{lcOpeningRequestCreateForm.value.administrativeDepartment}} readonly></textarea>
                                        </mat-form-field>
                                    </div>

                                    <!-- Input Field for Head Of Department -->
                                    <div class="col-sm-3">
                                        <mat-form-field>
                                            <mat-select formControlName="headOfDepartment"
                                                placeholder="Head Of Department"   matTooltip={{lcOpeningRequestCreateForm.value.officeName}} required>
                                                <mat-option>
                                                    <ngx-mat-select-search [formControl]="headOfDepartmentCtrl"
                                                        [placeholderLabel]="'Find Head Of Department...'"
                                                        [noEntriesFoundLabel]="'no matching Head Of Department found'"
                                                        charactersOnly>
                                                    </ngx-mat-select-search>
                                                </mat-option>
                                                <mat-option *ngFor="
                                                        let item of headOfDepartmentList
                                                            | filterSelectInput: headOfDepartmentCtrl.value:'name'
                                                    " [value]="item.id" matTooltip="{{ item.name }}">
                                                    {{ item.name }}
                                                </mat-option>
                                            </mat-select>
                                            <div class="error-wrapper" *ngIf="
                                                    lcOpeningRequestCreateForm.controls.headOfDepartment.touched &&
                                                    lcOpeningRequestCreateForm.controls.headOfDepartment.errors
                                                ">
                                                <mat-error *ngIf="
                                                        lcOpeningRequestCreateForm.controls.headOfDepartment.errors
                                                            .required
                                                    ">
                                                    {{ errorMessage.HEAD_OF_DEPARTMENT }}
                                                </mat-error>
                                            </div>
                                        </mat-form-field>
                                    </div>

                                    <!-- Input Field for Parent Head Department -->
                                    <div class="col-sm-3">
                                        <mat-form-field>
                                            <input matInput placeholder="Treasury Office"
                                                formControlName="treasuryOffice" readonly />
                                            <!-- <textarea matInput formControlName="treasuryOffice" placeholder="Treasury Office"
                        readonly></textarea> -->
                                        </mat-form-field>
                                    </div>

                                    <!-- Input Field for District -->
                                    <div class="col-sm-3">
                                        <mat-form-field>
                                            <input matInput placeholder="District" formControlName="district"
                                                readonly />
                                        </mat-form-field>
                                    </div>

                                    <!-- Input Field for Cardex Number -->
                                    <div class="col-sm-3">
                                        <mat-form-field>
                                            <input matInput placeholder="Cardex No." formControlName="cardexNo"
                                                readonly />
                                        </mat-form-field>
                                    </div>

                                    <!-- Input Field for DDO Code -->
                                    <div class="col-sm-3">
                                        <mat-form-field>
                                            <input matInput placeholder="DDO Code" formControlName="ddoCode" readonly />
                                        </mat-form-field>
                                    </div>

                                    <!-- Input Field for Division Office -->
                                    <div class="col-sm-3">
                                        <mat-form-field>
                                            <!-- <input matInput placeholder="Division Name" formControlName="divisionName" required> -->
                                            <textarea matInput formControlName="divisionName"
                                                placeholder="Division Name" cdkTextareaAutosize
                                                cdkAutosizeMinRows="fa-stack-2x" required maxlength="200" noSpaceOnly
                                                  matTooltip={{lcOpeningRequestCreateForm.value.divisionName}}>
                                            </textarea>
                                            <div class="error-wrapper" *ngIf="
                                                    lcOpeningRequestCreateForm.controls.divisionName.touched &&
                                                    lcOpeningRequestCreateForm.controls.divisionName.errors
                                                ">
                                                <mat-error *ngIf="
                                                        lcOpeningRequestCreateForm.controls.divisionName.errors.required
                                                    ">
                                                    {{ errorMessage.DIVISION_OFFICE }}
                                                </mat-error>
                                            </div>
                                        </mat-form-field>
                                    </div>

                                    <!-- Input field for Circle Name -->
                                    <div class="col-sm-3">
                                        <mat-form-field class="full-width">
                                            <mat-select formControlName="circleName" placeholder="Circle Name"
                                                (selectionChange)="onCircle($event)" maxlength="200" >
                                                <mat-option>
                                                    <ngx-mat-select-search [formControl]="CircleNameCtrl"
                                                        [placeholderLabel]="'Find Circle Name...'"
                                                        [noEntriesFoundLabel]="'No matching Circle Name found'"
                                                        (keypress)="directiveObject.onlyAlphabetsAndSpace($event)">
                                                    </ngx-mat-select-search>
                                                </mat-option>
                                                <mat-option *ngFor="
                                                        let circleName of CircleNameList
                                                            | filterSelectInput: CircleNameCtrl.value: 'circleName'
                                                    " [value]="circleName.circleId"
                                                    matTooltip="{{ circleName.circleName }}">
                                                    {{ circleName.circleName }}
                                                </mat-option>
                                            </mat-select>
                                            <div class="error-wrapper" *ngIf="
                                                    lcOpeningRequestCreateForm.controls.circleName.touched &&
                                                    lcOpeningRequestCreateForm.controls.circleName.errors
                                                ">
                                                <mat-error *ngIf="
                                                        lcOpeningRequestCreateForm.controls.circleName.errors.required
                                                    ">
                                                    {{ errorMessage.CIRCLE_NAME }}
                                                </mat-error>
                                            </div>
                                        </mat-form-field>
                                    </div>

                                    <!-- Input field for Circle Code -->
                                    <div class="col-sm-3">
                                        <mat-form-field *ngIf="!circleNameFalg">
                                            <input matInput placeholder="Circle Code" formControlName="circleCode"
                                                readonly />
                                        </mat-form-field>
                                        <mat-form-field *ngIf="circleNameFalg">
                                            <input matInput placeholder="Enter Circle Name"
                                                formControlName="otherCircleName" maxlength="200" noSpaceOnly
                                                 matTooltip={{lcOpeningRequestCreateForm.value.otherCircleName}}/>
                                            <div class="error-wrapper" *ngIf="
                                                    lcOpeningRequestCreateForm.controls.otherCircleName.touched &&
                                                    lcOpeningRequestCreateForm.controls.otherCircleName.errors">
                                                <mat-error *ngIf="
                                                        lcOpeningRequestCreateForm.controls.otherCircleName.errors.required">
                                                    {{ errorMessage.ENTER_CIRCLE_NAME }}
                                                </mat-error>
                                            </div>
                                        </mat-form-field>

                                    </div>

                                    <!-- Input field for Circle Name -->
                                    <!-- <div class="col-sm-3" *ngIf="!circleNameFalg">
                                    </div> -->

                                    <!-- Input Field for Remarks -->
                                    <div class="col-sm-3">
                                        <mat-form-field>
                                            <textarea matInput formControlName="remarks" placeholder="Remarks"
                                                cdkTextareaAutosize cdkAutosizeMinRows="4" maxlength="200" noSpaceOnly
                                                alphaNumericSpace required></textarea>
                                            <div class="error-wrapper" *ngIf="
                                                    lcOpeningRequestCreateForm.controls.remarks.touched &&
                                                    lcOpeningRequestCreateForm.controls.remarks.errors">
                                                <mat-error
                                                    *ngIf="lcOpeningRequestCreateForm.controls.remarks.errors.required">
                                                    {{ errorMessage.REMARKS }}
                                                </mat-error>
                                            </div>
                                        </mat-form-field>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                    <!-- Action Buttons Starts -->
                    <div class="form-action-button">
                        <button type="button" mat-raised-button color="primary" title="Save as Draft"
                            *ngIf="this.mode !== 'view' && createRecordFlag"
                            [disabled]="!lcOpeningRequestCreateForm.valid" (click)="OpeningRequestSaveAndProcess()">
                            <i class="material-icons" title="Save as Draft" aria-hidden="true">
                                save
                            </i>
                            Save and Process
                        </button>

                        <button type="reset" mat-raised-button color="accent" title="Reset"
                            *ngIf="this.mode !== 'view' && openReqResetFlag" (click)="lcAccountOpeningRequestReset()">
                            <i class="material-icons" title="Reset" aria-hidden="true">
                                restore
                            </i>
                            Reset
                        </button>
                        <button type="button" mat-raised-button color="warn" title="Listing" (click)="gotoListing()">
                            <i class="material-icons" title="Listing" aria-hidden="true">
                                list
                            </i>
                            Listing
                        </button>
                    </div>
                    <!-- Action Buttons Ends -->
                </mat-tab>
                <!-- Mat Tab for LC Opening Ends -->
                <!-- Mat Tab for Bank Details Starts -->
                <mat-tab
                    [disabled]="this.hdrId == undefined || this.hdrId == null || this.hdrId == 'NaN' ? true : false">
                    <ng-template mat-tab-label>
                        Bank Details
                    </ng-template>
                    <div class="box box-primary" *ngIf="showTreasuryVar">
                        <div class="box-header">
                            Bank Details
                            <a class="hyper-link" (click)="historyDialogView('forBankDetails')"> View History</a>
                        </div>
                        <div class="box-body">
                            <form [formGroup]="bankDetailsCreateForm" (ngSubmit)="lcOpeningRequestCreateFormData()">
                                <div class="row">
                                    <!-- Input Field for Bank Name -->
                                    <div class="col-sm-3">
                                        <mat-form-field>
                                            <mat-select formControlName="bankName" placeholder="Bank Name" required
                                                (selectionChange)="getBankBranchList()">
                                                <mat-option>
                                                    <ngx-mat-select-search [formControl]="BankNameCtrl"
                                                        [placeholderLabel]="'Select Bank Name ...'"
                                                        [noEntriesFoundLabel]="'no matching Bank Name found'">
                                                    </ngx-mat-select-search>
                                                </mat-option>
                                                <mat-option *ngFor="
                                                        let bankNameName of BankName_list
                                                            | filterSelectInput: BankNameCtrl.value:'bankName'
                                                    " [value]="bankNameName.bankId">
                                                    {{ bankNameName.bankName }}
                                                </mat-option>
                                            </mat-select>
                                            <div class="error-wrapper" *ngIf="
                                                    bankDetailsCreateForm.controls.bankName.touched &&
                                                    bankDetailsCreateForm.controls.bankName.errors
                                                ">
                                                <mat-error
                                                    *ngIf="bankDetailsCreateForm.controls.bankName.errors.required">
                                                    {{ errorMessage.BANK_NAME }}
                                                </mat-error>
                                            </div>
                                        </mat-form-field>
                                    </div>

                                    <!-- Input Field for Bank Branch -->
                                    <div class="col-sm-3">
                                        <mat-form-field>
                                            <mat-select formControlName="bankBranch" placeholder="Bank Branch Name"
                                                required datoAutoFocus="false" (selectionChange)="onBankBranch($event)">
                                                <mat-option>
                                                    <ngx-mat-select-search [formControl]="BankBranchCtrl"
                                                        [placeholderLabel]="'Select Bank Branch ...'"
                                                        [noEntriesFoundLabel]="'no matching Bank Branch found'">
                                                    </ngx-mat-select-search>
                                                </mat-option>
                                                <mat-option *ngFor="
                                                        let bankBranchName of BankBranch_list
                                                            | filterSelectInput: BankBranchCtrl.value:'bankBranchName'
                                                    " [value]="bankBranchName.bankBranchId"
                                                    matTooltip="{{ bankBranchName.bankBranchName }}">
                                                    {{ bankBranchName.bankBranchName }}
                                                </mat-option>
                                            </mat-select>
                                            <div class="error-wrapper" *ngIf="
                                                    bankDetailsCreateForm.controls.bankBranch.touched &&
                                                    bankDetailsCreateForm.controls.bankBranch.errors
                                                ">
                                                <mat-error
                                                    *ngIf="bankDetailsCreateForm.controls.bankBranch.errors.required">
                                                    {{ errorMessage.BANK_BRANCH }}
                                                </mat-error>
                                            </div>
                                        </mat-form-field>
                                    </div>

                                    <!-- Input Field for Bank Code -->
                                    <div class="col-sm-3">
                                        <mat-form-field>
                                            <input matInput formControlName="bankCode" placeholder="Bank Branch Code"
                                                readonly />
                                        </mat-form-field>
                                    </div>

                                    <!-- Input Field for Bank remarks -->
                                    <div class="col-sm-3">
                                        <mat-form-field>
                                            <textarea matInput formControlName="bankRemarks" placeholder="Remarks"
                                                required cdkTextareaAutosize cdkAutosizeMinRows="4"></textarea>
                                            <div class="error-wrapper" *ngIf="
                                                    bankDetailsCreateForm.controls.bankRemarks.touched &&
                                                    bankDetailsCreateForm.controls.bankRemarks.errors
                                                ">
                                                <mat-error
                                                    *ngIf="bankDetailsCreateForm.controls.bankRemarks.errors.required">
                                                    {{ errorMessage.REMARKS }}
                                                </mat-error>
                                            </div>
                                        </mat-form-field>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                    <!-- Action Buttons Starts -->
                    <div class="form-action-button">
                        <button type="button" mat-raised-button color="primary" title="Save as Draft"
                            *ngIf="this.mode !== 'view' && !isCoDdoHodTabHideFlag"
                            [disabled]="!bankDetailsProcessEnableFlag || !bankDetailsCreateForm.value.bankCode || !bankDetailsCreateForm.valid "
                            (click)="bankDetailsSaveAndProcess()">
                            <i class="material-icons" title="Save as Draft" aria-hidden="true">
                                save
                            </i>
                            Save and Process
                        </button>
                        <button type="button" mat-raised-button color="primary" title="Save as Draft"
                            *ngIf="this.mode !== 'view' && isCoDdoHodTabHideFlag"
                            [disabled]="!bankDetailsProcessEnableFlag || !bankDetailsCreateForm.valid"
                            (click)="bankDetailsSaveAndProcess()">
                            <i class="material-icons" title="Save as Draft" aria-hidden="true">
                                save
                            </i>
                            Save and Process
                        </button>

                        <button type="reset" mat-raised-button color="accent" title="Reset"
                            *ngIf="this.mode !== 'view' && bankDetailsResetFlag" (click)="bankDetailsReset()">
                            <i class="material-icons" title="Reset" aria-hidden="true">
                                restore
                            </i>
                            Reset
                        </button>
                        <button type="button" mat-raised-button color="warn" title="Listing"
                            (click)="directiveObject.goToScreen('/lc/create-lc-account-listing-division')">
                            <i class="material-icons" title="Listing" aria-hidden="true">
                                list
                            </i>
                            Listing
                        </button>
                    </div>
                    <!-- Action Buttons Ends -->
                </mat-tab>
                <!-- Mat Tab for Bank Details Ends -->

                <!-- Mat Tab for AG Details Starts  -->
                <mat-tab
                    [disabled]="this.hdrId == undefined || this.hdrId == null || this.hdrId == 'NaN' ? true : false">
                    <ng-template mat-tab-label>
                        Details for AG Office
                    </ng-template>
                    <div class="box box-primary" *ngIf="showTreasuryVar">
                        <div class="box-header">
                            Details for AG Office
                            <a class="hyper-link" (click)="historyDialogView('forAGOffice')">View History</a>
                        </div>
                        <div class="box-body">
                            <form [formGroup]="aGOfficeCreateForm" (ngSubmit)="lcOpeningRequestCreateFormData()">
                                <div class="row">
                                    <!-- Input Field for Authorization Number -->
                                    <div class="col-sm-3">
                                        <mat-form-field>
                                            <input matInput formControlName="agAuthorizationNo"
                                                [ngModel]="agAuthorizationNovalue"
                                                (ngModelChange)="agAuthorizationNovalue = $event ? $event.toUpperCase(): $event"
                                                (keypress)="directiveObject.onlyAlphabetsNumberAllSpecial($event)"
                                                placeholder="AG Authorization No." required maxlength="80" />
                                            <div class="error-wrapper" *ngIf="
                                                    aGOfficeCreateForm.controls.agAuthorizationNo.touched &&
                                                    aGOfficeCreateForm.controls.agAuthorizationNo.errors
                                                ">
                                                <mat-error *ngIf="
                                                        aGOfficeCreateForm.controls.agAuthorizationNo.errors.required
                                                    ">
                                                    {{ errorMessage.AG_AUTHORIZATION_NO }}
                                                </mat-error>
                                            </div>
                                        </mat-form-field>
                                    </div>

                                    <div class="col-sm-3">
                                        <mat-form-field>
                                            <input matInput formControlName="agAuthorizationDate"
                                                [matDatepicker]="picker3" placeholder="AG Authorization Date"
                                                [max]="todayDate" required readonly>
                                            <mat-datepicker-toggle matSuffix [for]="picker3"></mat-datepicker-toggle>
                                            <mat-datepicker #picker3
                                                [disabled]="this.mode=='view' || isTreasuryHideFlag || datLoginFlag || isCoDdoHodTabHideFlag">
                                            </mat-datepicker>
                                            <div class="error-wrapper" *ngIf="
                                          aGOfficeCreateForm.controls.agAuthorizationDate.touched &&
                                          aGOfficeCreateForm.controls.agAuthorizationDate.errors">
                                                <mat-error *ngIf="
                                              aGOfficeCreateForm.controls.agAuthorizationDate.errors.required
                                          ">
                                                    {{ errorMessage.AG_AUTHORIZATION_DATE }}
                                                </mat-error>
                                            </div>
                                        </mat-form-field>
                                    </div>

                                    <!-- Input Field for Authorization Date -->
                                    <!-- <div class="col-sm-3">
                                        <mat-form-field>
                                            <input matInput formControlName="agAuthorizationDate"
                                                [matDatepicker]="picker1" placeholder="AG Authorization Date"
                                                required />
                                            <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
                                            <mat-datepicker [startAt]="minDate" #picker1></mat-datepicker>
                                            <div class="error-wrapper" *ngIf="
                                                    aGOfficeCreateForm.controls.agAuthorizationDate.touched &&
                                                    aGOfficeCreateForm.controls.agAuthorizationDate.errors
                                                ">
                                                <mat-error *ngIf="
                                                        aGOfficeCreateForm.controls.agAuthorizationDate.errors.required
                                                    ">
                                                    {{ errorMessage.AG_AUTHORIZATION_DATE }}
                                                </mat-error>
                                            </div>
                                        </mat-form-field>
                                    </div>
 -->
                                    <!-- Input Field for Major Head -->
                                    <div class="col-sm-3">
                                        <mat-form-field>
                                            <mat-select formControlName="majorHead" placeholder="Major Head"
                                                maxlength="4" required (selectionChange)="getSubMajorHeadList()">
                                                <mat-option>
                                                    <ngx-mat-select-search [formControl]="majorHeadCtrl"
                                                        [placeholderLabel]="'Select major Head ...'"
                                                        [noEntriesFoundLabel]="'no matching major Head found'"
                                                        (keypress)="directiveObject.onlyNumberAndAlphabets($event)">
                                                    </ngx-mat-select-search>
                                                </mat-option>
                                                <mat-option *ngFor="
                                                        let item of majorHead_list
                                                            | filterSelectInput: majorHeadCtrl.value:'codeName'
                                                    " [value]="item.id">
                                                    {{ item.codeName }}
                                                </mat-option>
                                            </mat-select>
                                            <div class="error-wrapper" *ngIf="
                                                    aGOfficeCreateForm.controls.majorHead.touched &&
                                                    aGOfficeCreateForm.controls.majorHead.errors
                                                ">
                                                <mat-error
                                                    *ngIf="aGOfficeCreateForm.controls.majorHead.errors.required">
                                                    {{ errorMessage.MAJOR_HEAD }}
                                                </mat-error>
                                            </div>
                                        </mat-form-field>
                                    </div>

                                    <!-- Input Field for Sub Major Head -->
                                    <div class="col-sm-3">
                                        <mat-form-field>
                                            <mat-select formControlName="subMajorHead" placeholder="Sub Major Head"
                                                maxlength="2" required (selectionChange)="getMinorHeadList()">
                                                <!-- <span *ngIf="isAgHideFlag" class="star">*</span> -->
                                                <mat-option>
                                                    <ngx-mat-select-search [formControl]="subMajorHeadCtrl"
                                                        [placeholderLabel]="'Select Minor Head ...'"
                                                        [noEntriesFoundLabel]="'no matching Minor Head found'"
                                                        (keypress)="directiveObject.onlyNumberAndAlphabets($event)">
                                                    </ngx-mat-select-search>
                                                </mat-option>
                                                <mat-option *ngFor="
                                                        let item of subMajorHead_list
                                                            | filterSelectInput: subMajorHeadCtrl.value:'codeName'
                                                    " [value]="item.id">
                                                    {{ item.codeName}}
                                                </mat-option>
                                            </mat-select>
                                            <div class="error-wrapper" *ngIf="
                                                    aGOfficeCreateForm.controls.subMajorHead.touched &&
                                                    aGOfficeCreateForm.controls.subMajorHead.errors
                                                ">
                                                <mat-error
                                                    *ngIf="aGOfficeCreateForm.controls.subMajorHead.errors.required">
                                                    {{ errorMessage.SUB_MAJOR_HEAD }}
                                                </mat-error>
                                            </div>
                                        </mat-form-field>
                                    </div>

                                    <!-- Input Field for Minor Head -->
                                    <div class="col-sm-3">
                                        <mat-form-field>
                                            <mat-select formControlName="minorHead" placeholder="Minor Head"
                                                maxlength="3" required (selectionChange)="getSubHeadList()">
                                                <mat-option>
                                                    <ngx-mat-select-search [formControl]="minorHeadCtrl"
                                                        [placeholderLabel]="'Select Minor Head ...'"
                                                        [noEntriesFoundLabel]="'no matching Minor Head found'"
                                                        (keypress)="directiveObject.onlyNumberAndAlphabets($event)">
                                                    </ngx-mat-select-search>
                                                </mat-option>
                                                <mat-option *ngFor="
                                                        let item of minorHead_list
                                                            | filterSelectInput: minorHeadCtrl.value:'codeName'
                                                    " [value]="item.id">
                                                    {{ item.codeName }}
                                                </mat-option>
                                            </mat-select>
                                            <div class="error-wrapper" *ngIf="
                                                    aGOfficeCreateForm.controls.minorHead.touched &&
                                                    aGOfficeCreateForm.controls.minorHead.errors
                                                ">
                                                <mat-error
                                                    *ngIf="aGOfficeCreateForm.controls.minorHead.errors.required">
                                                    {{ errorMessage.MINOR_HEAD }}
                                                </mat-error>
                                            </div>
                                        </mat-form-field>
                                    </div>

                                    <!-- Input Field for Sub Head -->
                                    <div class="col-sm-3">
                                        <mat-form-field>
                                            <mat-select formControlName="subHead" placeholder="Sub Head" maxlength="2"
                                                required (selectionChange)="getDetailHeadList()">
                                                <mat-option>
                                                    <ngx-mat-select-search [formControl]="subHeadCtrl"
                                                        [placeholderLabel]="'Select Sub Head ...'"
                                                        [noEntriesFoundLabel]="'no matching Sub Head found'"
                                                        (keypress)="directiveObject.onlyNumberAndAlphabets($event)">
                                                    </ngx-mat-select-search>
                                                </mat-option>
                                                <mat-option *ngFor="
                                                        let item of subHead_list
                                                            | filterSelectInput: subHeadCtrl.value:'codeName'
                                                    " [value]="item.id">
                                                    {{ item.codeName }}
                                                </mat-option>
                                            </mat-select>
                                            <div class="error-wrapper" *ngIf="
                                                    aGOfficeCreateForm.controls.subHead.touched &&
                                                    aGOfficeCreateForm.controls.subHead.errors
                                                ">
                                                <mat-error *ngIf="aGOfficeCreateForm.controls.subHead.errors.required">
                                                    {{ errorMessage.SUB_HEAD }}
                                                </mat-error>
                                            </div>
                                        </mat-form-field>
                                    </div>

                                    <!-- Input Field for Detailed Head -->
                                    <div class="col-sm-3">
                                        <mat-form-field>
                                            <mat-select formControlName="detailedHead" placeholder="Detailed Head"
                                                maxlength="2" required>
                                                <mat-option>
                                                    <ngx-mat-select-search [formControl]="detailedHeadCtrl"
                                                        [placeholderLabel]="'Select Detailed Head ...'"
                                                        [noEntriesFoundLabel]="'no matching Detailed Head found'"
                                                        (keypress)="directiveObject.onlyNumberAndAlphabets($event)">
                                                    </ngx-mat-select-search>
                                                </mat-option>
                                                <mat-option *ngFor="
                                                        let item of detailedHead_list
                                                            | filterSelectInput: detailedHeadCtrl.value:'codeName'
                                                    " [value]="item.id">
                                                    {{ item.codeName }}
                                                </mat-option>
                                            </mat-select>
                                            <div class="error-wrapper" *ngIf="
                                                    aGOfficeCreateForm.controls.detailedHead.touched &&
                                                    aGOfficeCreateForm.controls.detailedHead.errors
                                                ">
                                                <mat-error
                                                    *ngIf="aGOfficeCreateForm.controls.detailedHead.errors.required">
                                                    {{ errorMessage.DETAILED_HEAD }}
                                                </mat-error>
                                            </div>
                                        </mat-form-field>
                                    </div>

                                    <!-- Input Field for AG remarks -->
                                    <div class="col-sm-3">
                                        <mat-form-field>
                                            <textarea matInput formControlName="agRemarks" placeholder="Remarks"
                                                cdkTextareaAutosize cdkAutosizeMinRows="4" required>
                                            <span *ngIf="isAgHideFlag" class="star">*</span></textarea>
                                            <div class="error-wrapper" *ngIf="
                                                    aGOfficeCreateForm.controls.agRemarks.touched &&
                                                    aGOfficeCreateForm.controls.agRemarks.errors
                                                ">
                                                <mat-error
                                                    *ngIf="aGOfficeCreateForm.controls.agRemarks.errors.required">
                                                    {{ errorMessage.REMARKS }}
                                                </mat-error>
                                            </div>
                                        </mat-form-field>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>

                    <!-- Action Buttons Starts -->
                    <div class="form-action-button">
                        <button type="button" mat-raised-button color="primary" title="Save as Draft"
                            [disabled]="!agOfficeProcessEnableFlag || !aGOfficeCreateForm.valid"
                            *ngIf="this.mode !== 'view' && !isAgHideFlag && !isCoDdoHodTabHideFlag"
                            (click)="agOfficeSaveAndProcess()">
                            <i class="material-icons" title="Save as Draft" aria-hidden="true">
                                save
                            </i>
                            Save and Process
                        </button>
                        <!-- button for ddo co and hod login-->
                        <button type="button" mat-raised-button color="primary" title="Save as Draft"
                            [disabled]="!agOfficeProcessEnableFlag"
                            *ngIf="this.mode !== 'view' && isCoDdoHodTabHideFlag" (click)="agOfficeSaveAndProcess()">
                            <i class="material-icons" title="Save as Draft" aria-hidden="true">
                                save
                            </i>
                            Save and Process
                        </button>
                        <!-- button for AG login-->
                        <button type="button" mat-raised-button color="primary" title="Save as Draft"
                            [disabled]="!agOfficeProcessEnableFlag" *ngIf="this.mode !== 'view' && isAgHideFlag"
                            (click)="agOfficeSaveAndProcess()">
                            <i class="material-icons" title="Save as Draft" aria-hidden="true">
                                save
                            </i>
                            Save and Process
                        </button>

                        <!-- [disabled]="!agOfficeProcessEnableFlag || !aGOfficeCreateForm.valid" *ngIf="this.mode!=='view' && isAgHideFlag" -->
                        <button type="reset" mat-raised-button color="accent" title="Reset"
                            *ngIf="this.mode !== 'view' && agDetailsResetFlag" (click)="agOfficeReset()">
                            <i class="material-icons" title="Reset" aria-hidden="true">
                                restore
                            </i>
                            Reset
                        </button>
                        <button type="button" mat-raised-button color="warn" title="Listing"
                            (click)="directiveObject.goToScreen('/lc/create-lc-account-listing-division')">
                            <i class="material-icons" title="Listing" aria-hidden="true">
                                list
                            </i>
                            Listing
                        </button>
                        <button type="button" mat-raised-button color="warn" title="Print" *ngIf="agOfficeEditReset"
                            (click)="printLetterDocument()">
                            <i class=" material-icons" title="Print" aria-hidden="true">
                                list
                            </i>
                            Print
                        </button>
                    </div>
                    <!-- Action Buttons Ends -->
                </mat-tab>
                <!-- Mat Tab for AG Details Ends -->

                <!-- Mat Tab for for Details For Division Office Starts -->
                <!-- <mat-tab *ngIf="!isCoDdoHodTabHideFlag && !isAgHideFlag"> -->
                <mat-tab
                    [disabled]="this.hdrId == undefined || this.hdrId == null || this.hdrId == 'NaN' ? true : false">
                    <ng-template mat-tab-label>
                        Details For Division Office
                    </ng-template>

                    <!-- Input Field for Details For Division Office -->
                    <div class="box box-primary" *ngIf="showTreasuryVar">
                        <div class="box-header">
                            Details For Division Office
                            <a class="hyper-link" (click)="historyDialogView('forDivisionOffice')">View History</a>
                        </div>
                        <div class="box-body">
                            <form [formGroup]="divisionOfficeCreateForm" (ngSubmit)="lcOpeningRequestCreateFormData()">
                                <div class="row">
                                    <div class="col-sm-6">
                                        <mat-form-field>
                                            <input matInput formControlName="divisionCode" [ngModel]="divisionCodevalue"
                                                (ngModelChange)="divisionCodevalue = $event ? $event.toUpperCase(): $event"
                                                (keypress)="directiveObject.onlyNumberAndAlphabets($event)"
                                                placeholder="Division Code" required maxlength="20" />
                                            <div class="error-wrapper" *ngIf="
                                                    divisionOfficeCreateForm.controls.divisionCode.touched &&
                                                    divisionOfficeCreateForm.controls.divisionCode.errors
                                                ">
                                                <mat-error *ngIf="
                                                        divisionOfficeCreateForm.controls.divisionCode.errors.required
                                                    ">
                                                    {{ errorMessage.DIVISION_CODE }}
                                                </mat-error>
                                            </div>
                                        </mat-form-field>
                                    </div>
                                    <div class="col-sm-6">
                                        <mat-form-field>
                                            <textarea matInput formControlName="lcRemarks" placeholder="Remarks"
                                                required cdkTextareaAutosize cdkAutosizeMinRows="4" maxlength="200">
                                            <span *ngIf="isTreasuryHideFlag" class="star">*</span></textarea>
                                            <div class="error-wrapper" *ngIf="
                                                    divisionOfficeCreateForm.controls.lcRemarks.touched &&
                                                    divisionOfficeCreateForm.controls.lcRemarks.errors
                                                ">
                                                <mat-error
                                                    *ngIf="divisionOfficeCreateForm.controls.lcRemarks.errors.required">
                                                    {{ errorMessage.REMARKS }}
                                                </mat-error>
                                            </div>
                                        </mat-form-field>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>

                    <!-- Action Buttons Starts -->
                    <div class="form-action-button">
                        <button type="button" mat-raised-button color="primary" title="Save as Draft"
                            *ngIf="this.mode !== 'view' && !isCoDdoHodTabHideFlag && !isAgHideFlag && !datLoginFlag"
                            (click)="saveDivisionDetails()"
                            [disabled]="!divisionDetailsProcessEnableFlag || !divisionOfficeCreateForm.valid">
                            <i class="material-icons" title="Save as Draft" aria-hidden="true">
                                save
                            </i>
                            Save as Draft
                        </button>
                        <!--  button for ddo co and hod login-->
                        <button type="button" mat-raised-button color="primary" title="Save as Draft"
                            *ngIf="this.mode !== 'view' && isCoDdoHodTabHideFlag && !datLoginFlag"
                            (click)="saveDivisionDetails()" [disabled]="!divisionDetailsProcessEnableFlag">
                            <i class="material-icons" title="Save as Draft" aria-hidden="true">
                                save
                            </i>
                            Save as Draft
                        </button>

                        <!--  button for AG login-->
                        <button type="button" mat-raised-button color="primary" title="Save as Draft"
                            *ngIf="this.mode !== 'view' && isAgHideFlag && !datLoginFlag"
                            (click)="saveDivisionDetails()" [disabled]="!divisionDetailsProcessEnableFlag">
                            <i class="material-icons" title="Save as Draft" aria-hidden="true">
                                save
                            </i>
                            Save as Draft
                        </button>

                        <button mat-raised-button type="submit" class="green" title="Submit"
                            *ngIf="this.mode !== 'view' && !isCoDdoHodTabHideFlag && !isAgHideFlag && !datLoginFlag"
                            (click)="submitClick()"
                            [disabled]="!divisionDetailsProcessEnableFlag || !divisionOfficeCreateForm.valid">
                            <i class="material-icons" title="Submit" aria-hidden="true">done</i> Submit
                        </button>
                        <!-- button for ddo co and hod login-->
                        <button mat-raised-button type="submit" class="green" title="Submit"
                            *ngIf="this.mode !== 'view' && isCoDdoHodTabHideFlag && !datLoginFlag"
                            (click)="submitClick()" [disabled]="!divisionDetailsProcessEnableFlag">
                            <i class="material-icons" title="Submit" aria-hidden="true">done</i> Submit
                        </button>
                        <!-- button for AG  login-->

                        <button mat-raised-button type="submit" class="green" title="Submit"
                            *ngIf="this.mode !== 'view' && isAgHideFlag && !datLoginFlag" (click)="submitClick()"
                            [disabled]="!divisionDetailsProcessEnableFlag">
                            <i class="material-icons" title="Submit" aria-hidden="true">done</i> Submit
                        </button>

                        <button mat-raised-button type="submit" class="green" title="Submit"
                            *ngIf="this.mode !== 'view' && datLoginFlag" (click)="submitClick()"
                            [disabled]="!divisionDetailsProcessEnableFlag">
                            <i class="material-icons" title="Submit" aria-hidden="true">done</i> Submit
                        </button>

                        <button type="reset" mat-raised-button color="accent" title="Reset"
                            *ngIf="this.mode !== 'view' && divisionDetailsResetFlag" (click)="divisionOfficeReset()">
                            <i class="material-icons" title="Reset" aria-hidden="true">
                                restore
                            </i>
                            Reset
                        </button>

                        <button type="button" mat-raised-button color="warn" title="Listing"
                            (click)="directiveObject.goToScreen('/lc/create-lc-account-listing-division')">
                            <i class="material-icons" title="Listing" aria-hidden="true">
                                list
                            </i>
                            Listing
                        </button>
                    </div>
                    <!-- Action Buttons Ends -->
                </mat-tab>
                <!-- Mat Tab for Division Details Ends -->
                <!-- Mat Tab for Attachments Starts -->
                <mat-tab
                    [disabled]="this.hdrId == undefined || this.hdrId == null || this.hdrId == 'NaN' ? true : false">
                    <ng-template mat-tab-label>
                        Attachment
                    </ng-template>
                    <div class="box box-primary">
                        <div class="box-header">Attachment</div>

                        <div class="box-body">
                            <!-- Attachment Table Starts -->
                            <table mat-table [dataSource]="dataSourceBrowse" width="100%" id="browseTable">
                                <ng-container matColumnDef="position">
                                    <th mat-header-cell *matHeaderCellDef scope="row">Sr. No.</th>
                                    <td mat-cell *matCellDef="let item; let i = index" class="centerAlign">
                                        {{ i + 1 }}
                                    </td>
                                </ng-container>
                                <ng-container matColumnDef="attachmentTypeId">
                                    <th mat-header-cell *matHeaderCellDef>
                                        Attachment Type <span class="star">*</span>
                                    </th>
                                    <td mat-cell *matCellDef="let item; let i = index">
                                        <mat-select [disabled]="item.documentId || this.mode === 'view'"
                                            placeholder="Attachment Type" required [(ngModel)]="item.attachmentTypeId"
                                            (selectionChange)="onAttachmentTypeChange(item, i)">
                                            <mat-option>
                                                <ngx-mat-select-search [formControl]="attachmentTypeCodeCtrl"
                                                    [placeholderLabel]="'Find Attachment Type...'"
                                                    [noEntriesFoundLabel]="'no matching Attachment Type found'">
                                                </ngx-mat-select-search>
                                            </mat-option>

                                            <mat-option *ngFor="let AT of attachmentTypeList" [value]="AT.id">
                                                {{ AT.name }}
                                            </mat-option>
                                        </mat-select>
                                    </td>
                                </ng-container>
                                <ng-container matColumnDef="fileName">
                                    <th mat-header-cell *matHeaderCellDef>File name <span class="star">*</span></th>
                                    <td mat-cell *matCellDef="let item">
                                        <mat-form-field floatLabel="never">
                                            <input [disabled]="item.documentId || this.mode === 'view'" matInput
                                                [value]="item.fileName" [(ngModel)]="item.fileName" maxlength="50" />
                                        </mat-form-field>
                                    </td>
                                </ng-container>
                                <ng-container matColumnDef="browse">
                                    <th mat-header-cell *matHeaderCellDef>Browse File <span class="star">*</span></th>
                                    <td mat-cell *matCellDef="let item; let i = index" class="centerAlign">
                                        <button [disabled]="item.documentId || this.mode === 'view'" type="button"
                                            (click)="openFileSelector(i)" class="btn-browse">
                                            Browse Files
                                        </button>
                                    </td>
                                </ng-container>
                                <ng-container matColumnDef="uploadedFileName">
                                    <th mat-header-cell *matHeaderCellDef>
                                        Uploaded file name <span class="star">*</span>
                                    </th>
                                    <td mat-cell *matCellDef="let item; let i = index">
                                        <span *ngIf="item.uploadedFileName">{{ item.uploadedFileName }}</span>
                                        <span>
                                            <i *ngIf="item.uploadedFileName && !item.documentId"
                                                class="material-icons closesmall"
                                                (click)="removeUploadUserFile(item, i)" title="Delete File"
                                                aria-hidden="true">close</i>
                                        </span>
                                    </td>
                                </ng-container>
                                <ng-container matColumnDef="userName">
                                    <th mat-header-cell *matHeaderCellDef>Uploaded By</th>
                                    <td mat-cell *matCellDef="let item">
                                        <mat-label>{{ item.userName }}</mat-label>
                                    </td>
                                </ng-container>
                                <ng-container matColumnDef="action">
                                    <th mat-header-cell *matHeaderCellDef style="width: 10%;">Action</th>
                                    <td mat-cell *matCellDef="let item; let i = index">
                                        <table class="iconTable">
                                            <tbody>
                                                <tr>
                                                    <td width="auto">
                                                        <i class="material-icons plus delete" *ngIf="
                                                                dataSourceBrowse &&
                                                                dataSourceBrowse.data &&
                                                                (dataSourceBrowse.data.length > 1 || item.documentId) &&
                                                                this.mode !== 'view'"
                                                            (click)="deleteUploadedAttachment(item, i)">
                                                            delete
                                                        </i>
                                                    </td>
                                                    <td width="auto">
                                                        <i class="material-icons plus view-icon" title="Download"
                                                            *ngIf="item && item.documentId"
                                                            (click)="downLoadUploadedAttachment(item)">vertical_align_bottom
                                                        </i>
                                                    </td>
                                                    <td width="auto">
                                                        <i class="material-icons plus view-icon" title="View"
                                                            *ngIf="item && item.documentId && item.isView "
                                                            (click)="viewUploadedAttachment(item, $event)">remove_red_eye</i>
                                                    </td>

                                                    <td width="auto">
                                                        <i class="material-icons plus add"
                                                            *ngIf="
                                                                dataSourceBrowse &&
                                                                dataSourceBrowse.data &&
                                                                i == dataSourceBrowse.data.length - 1 &&
                                                                dataSourceBrowse.data.length < maxAttachment  && this.mode !== 'view'"
                                                            (click)="addNewFileRow()">
                                                            add
                                                        </i>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </td>
                                </ng-container>
                                <tr mat-header-row *matHeaderRowDef="displayedBrowseColumns"></tr>
                                <tr mat-row *matRowDef="let row; columns: displayedBrowseColumns"></tr>
                            </table>

                            <!-- Attachment Table Ends -->

                            <input type="file" #attachment id="fileBrowse" style="visibility: hidden;"
                                (change)="onFileSelection($event)" />

                            <div class="legend">
                                1. Total File size should be under 2MB<br />
                                2. File type supported are: 'jpg', 'jpeg', 'png', 'pdf', JPG, JPEG, PNG, PDF.
                            </div>
                        </div>
                    </div>

                    <!-- Action Buttons Starts -->

                    <div class="form-action-button">
                        <button type="submit" mat-raised-button color="primary" *ngIf="this.mode !== 'view'"
                            (click)="saveAttachmentTab()">
                            <i class="material-icons" title="Save">save</i>

                            Upload
                        </button>

                        <button type="button" mat-raised-button color="warn" title="Listing"
                            (click)="directiveObject.goToScreen('/lc/create-lc-account-listing-division')">
                            <i class="material-icons" title="Listing" aria-hidden="true">
                                list
                            </i>

                            Listing
                        </button>

                        <button type="button" mat-raised-button class="btnClose" title="Close"
                            (click)="directiveObject.goToDashboard()">

                            <i class="material-icons" title="Close" aria-hidden="true">
                                close
                            </i>

                            Close
                        </button>
                    </div>

                    <!-- Action Buttons Ends -->
                </mat-tab>

                <!-- Mat Tab for Attachments Ends -->
            </mat-tab-group>
        </div>
    </div>
</div>