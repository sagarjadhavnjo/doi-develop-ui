<div class="container">
  <div class="form-wrapper">

    <!-- Screen Name, Reference No and Reference Date Header -->
    <div class="heading-section ng-star-inserted">
      <div>LC Advice Preparation</div>
      <div class="font-heading"><strong>Reference No:</strong> {{referenceNo}}</div>
      <div class="font-heading"><strong>Reference Date:</strong>
        {{(referenceDt ? (referenceDt | date: 'dd-MMM-yyyy hh:mm:ss a') :referenceDt)}} </div>

    </div>

    <!-- Breadcrumb -->
    <nav aria-label="breadcrumb">
      <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="javascript:void(0)">Home</a></li>
        <li class="breadcrumb-item " aria-current="page"><a href="javascript:void(0)">LC</a></li>
        <li class="breadcrumb-item active" aria-current="page">LC Advice Preparation</li>
      </ol>
    </nav>

    <!-- <mat-tab-group mat-stretch-tabs 
    [(selectedIndex)]="selectedTab" (selectedTabChange)="getTabIndex($event)"> -->
    <mat-tab-group mat-stretch-tabs [selectedIndex]="selectedTabIndex" (selectedIndexChange)="getTabIndex($event)">

      <!-- Mat Tab for LC Advice Details Starts -->
      <mat-tab>
        <ng-template mat-tab-label>
          LC Advice Details
        </ng-template>
        <!-- Form Starts -->
        <form [formGroup]="lcAdviceReceivedForm" (ngSubmit)="lcAdviceReceivedFormData()">

          <div class="box box-primary">
            <div class="box-header">LC Advice Details</div>
            <div class="box-body">

              <!-- Input Field for Advice Number -->
              <div class="row">
                <div class="col-sm-3">
                  <mat-form-field>
                    <input matInput placeholder="Advice No." formControlName="adviceNumber" readonly>
                  </mat-form-field>
                </div>

                <!-- Input Field for Advice Date -->
                <div class="col-sm-3">
                  <mat-form-field>
                    <input matInput formControlName="adviceDate" [matDatepicker]="picker1" placeholder="Advice Date"
                      readonly>
                    <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
                    <mat-datepicker #picker1 [disabled]="true"></mat-datepicker>
                  </mat-form-field>
                </div>

                <!-- Input Field for Division Code -->
                <div class="col-sm-3">
                  <mat-form-field>
                    <input matInput placeholder="Division Code" formControlName="divisionCode" readonly>
                  </mat-form-field>
                </div>

                <!-- Input Field for Division Name -->
                <div class="col-sm-3">
                  <mat-form-field>
                    <input matInput placeholder="Division Name" formControlName="divisionName" readonly matTooltip="">
                  </mat-form-field>
                </div>

                <!-- Input Field for Department -->
                <div class="col-sm-3">
                  <mat-form-field>
                    <input matInput placeholder="Department" formControlName="department" readonly matTooltip="">
                  </mat-form-field>
                </div>

                <!-- Input Field for District -->
                <div class="col-sm-3">
                  <mat-form-field>
                    <input matInput placeholder="District" formControlName="district" readonly>
                  </mat-form-field>
                </div>

                <!-- Input Field for Treasury Office -->
                <div class="col-sm-3">
                  <mat-form-field>
                    <input matInput placeholder="Treasury / Sub Treasury Office" formControlName="treasuryOffice"
                      readonly matTooltip="">
                  </mat-form-field>
                </div>

                <!-- Input Field for Division Office -->
                <div class="col-sm-3">
                  <mat-form-field>
                    <input matInput placeholder="Division Office" formControlName="divisionOffice" readonly
                      matTooltip="">
                  </mat-form-field>
                </div>

                <!-- Input Field for Drawing Officer -->
                <div class="col-sm-3">
                  <mat-form-field>
                    <input matInput placeholder="Drawing Officer" formControlName="drawingOfficer" readonly
                      matTooltip="">
                  </mat-form-field>
                </div>

                <!-- Input Field for Bank -->
                <div class="col-sm-3">
                  <mat-form-field>
                    <input matInput placeholder="Bank" formControlName="bank" readonly>
                  </mat-form-field>
                </div>

                <!-- Input Field for LC Valid From -->
                <div class="col-sm-3">
                  <mat-form-field>
                    <input matInput formControlName="lcValidFrom" [matDatepicker]="picker2" placeholder="LC Valid From"
                      readonly>
                    <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
                    <mat-datepicker #picker2 [disabled]="true"></mat-datepicker>
                  </mat-form-field>
                </div>

                <!-- Input Field for Month -->
                <div class="col-sm-3">
                  <mat-form-field class="full-width">
                    <mat-select formControlName="month" placeholder="Month" required>
                      <mat-option>
                        <ngx-mat-select-search [formControl]="MonthCtrl" [placeholderLabel]="'Find Month...'"
                          [noEntriesFoundLabel]="'No matching Month found'" charactersOnly>
                        </ngx-mat-select-search>
                      </mat-option>
                      <mat-option *ngFor="let fromMonth of MonthList | 
                      filterSelectInput: MonthCtrl.value :'viewValue'" [value]="fromMonth.viewValue">
                        {{fromMonth.viewValue}}
                      </mat-option>
                    </mat-select>
                    <div class="error-wrapper" *ngIf="lcAdviceReceivedForm.controls.month.touched
                    && lcAdviceReceivedForm.controls.month.errors">
                      <mat-error *ngIf="lcAdviceReceivedForm.controls.month.errors.required">
                        {{errorMessage.MONTH}}
                      </mat-error>
                    </div>

                  </mat-form-field>
                </div>

                <!-- Input Field for Payment Type -->
                <div class="col-sm-3">
                  <mat-form-field class="full-width">
                    <mat-select formControlName="paymentType" placeholder="Payment Type" required #paymentValue
                      [disabled]="hdrId">
                      <mat-option>
                        <ngx-mat-select-search [formControl]="PaymentTypeCtrl"
                          [placeholderLabel]="'Find Payment Type...'" [noEntriesFoundLabel]="'No matching Payment Type'"
                          (keypress)="directiveObject.onlyAlphabetsAndHyphen($event)">
                        </ngx-mat-select-search>
                      </mat-option>
                      <mat-option
                        *ngFor="let paymentType of PaymentTypeList | filterSelectInput:PaymentTypeCtrl.value: 'name'"
                        [value]="paymentType.id">
                        {{paymentType.name}}
                      </mat-option>
                    </mat-select>
                    <div class="error-wrapper" *ngIf="lcAdviceReceivedForm.controls.paymentType.touched
                    && lcAdviceReceivedForm.controls.paymentType.errors">
                      <mat-error *ngIf="lcAdviceReceivedForm.controls.paymentType.errors.required">
                        {{errorMessage.PAYMENT_TYPE}}
                      </mat-error>
                    </div>

                  </mat-form-field>
                </div>
              </div>

              <!-- Show Total of Opening Balance and New Balance -->
              <div class="heading-section ng-star-inserted">
                <div>(Opening LC Balance) {{openingBalance | number: '1.2-2'}} + (New) {{newBalance | number: '1.2-2'}}
                  =
                  {{lcBalance() | number: '1.2-2'}} </div>
              </div>
            </div>
          </div>

          <!-- Action Buttons Starts -->
          <div class="form-action-button">

            <button type="button" mat-raised-button color="primary"
              (click)="saveLcAdvPr()"
              [disabled]="!lcAdviceReceivedForm.value.paymentType || !lcAdviceReceivedForm.value.month">
              Save & Proceed
              <i class="material-icons" aria-hidden="true" title="Next">
                chevron_right
              </i>
            </button>
            <button type="button" mat-raised-button color="warn" title="Listing" (click)="gotoListing()"
              routerLinkActive="router-link-active">
              <i class="material-icons" title="Listing" aria-hidden="true">
                list
              </i>
              Listing
            </button>


          </div>
          <!-- Action Buttons Ends -->

        </form>

        <!-- Form Ends -->
      </mat-tab>
      <!-- Mat Tab for LC Advice Details Ends -->

      <!-- Mat Tab for Cheque/E-Payment Starts -->
      <mat-tab [disabled]="!hdrId">

        <ng-template mat-tab-label>
          Cheque/E-Payment Details
        </ng-template>

        <div class="box box-primary">
          <div class="box-header" *ngIf="showChequeTable">Cheque Details</div>
          <div class="box-header" *ngIf="showEpaymentTable">E-Payment Details</div>
          <div class="box-body">

            <div class="row" *ngIf="showChequeTable">
              <div class="col-sm-6">
                <label><strong>Last Cheque No. Used : </strong><span>{{lastChequeNumberUsed}}</span></label>
              </div>
              <div class="col-sm-6">
                <label><strong>New Cheque No. : </strong><span>{{newChequeNumber}}</span></label>
              </div>
            </div>

            <div class="mat-elevation-z8 mt-2" *ngIf="showChequeTable">


              <!-- Advice Receipt Table Starts -->
              <table mat-table [dataSource]="LcAdviceReceiptDataSource" class="mat-elevation-z8 "
                area-describedby="advice-receipt">

                <!-- Header Column -->
                <ng-container matColumnDef="parent1">
                  <th mat-header-cell *matHeaderCellDef scope="row" colspan="6" class="centerAlign">Cheque Details
                  </th>
                </ng-container>
                <!-- Serial Number Column -->
                <ng-container matColumnDef="srno">
                  <th mat-header-cell *matHeaderCellDef scope="row" style="width:5%">
                    Sr. No.
                  </th>
                  <td mat-cell *matCellDef="let element; let i = index" class="centerAlign">
                    {{ i + 1 }}
                  </td>
                  <td mat-footer-cell *matFooterCellDef></td>
                </ng-container>
                <!-- Cheque Date Column -->
                <ng-container matColumnDef="chequeDate">
                  <th mat-header-cell *matHeaderCellDef scope="row">Cheque Date *</th>
                  <td mat-cell *matCellDef="let element" style="width:15%">
                    <!-- <div *ngIf="element.isGenerateChequeNo"> -->
                    <mat-form-field>
                      <input matInput [(ngModel)]="element.chequeDate" [ngModelOptions]="{standalone: true}"
                        [matDatepicker]="picker3" [disabled]="true">
                      <mat-datepicker-toggle matSuffix [for]="picker3"></mat-datepicker-toggle>
                      <mat-datepicker #picker3 [disabled]="true"></mat-datepicker>
                    </mat-form-field>
                    <!-- </div> -->
                    <!-- <div *ngIf="!element.isGenerateChequeNo">
                      <mat-form-field>
                        <input matInput [disabled]="true">
                      </mat-form-field>
                    </div> -->
                  </td>
                  <td mat-footer-cell *matFooterCellDef>Cheque Total ( in Rs. )</td>
                </ng-container>

                <!-- Cheque Number Column -->
                <ng-container matColumnDef="chequeNo">
                  <th mat-header-cell *matHeaderCellDef scope="row" style="width:15%">Cheque No. *</th>
                  <td mat-cell *matCellDef="let element">

                    <mat-form-field>
                      <input matInput [(ngModel)]="element.chequeNo" [ngModelOptions]="{standalone: true}"
                        [disabled]="true">
                    </mat-form-field>

                  </td>
                  <td mat-footer-cell *matFooterCellDef></td>
                </ng-container>

                <!-- Party Name Column -->
                <ng-container matColumnDef="partyName">
                  <th mat-header-cell *matHeaderCellDef scope="row">Party Name *</th>
                  <td mat-cell *matCellDef="let element">
                    <mat-form-field>
                      <input matInput [(ngModel)]="element.vendorName" [ngModelOptions]="{standalone: true}" required
                        [datoAutoFocus]="true" (keypress)="directiveObject.onlyNumberAndAlphabetsWithSpace($event)"
                        [disabled]="element.isGenerateChequeNo">
                    </mat-form-field>
                  </td>
                  <td mat-footer-cell *matFooterCellDef></td>
                </ng-container>

                <!-- Cheque Amount Column -->
                <ng-container matColumnDef="chequeAmount">
                  <th mat-header-cell *matHeaderCellDef scope="row" style="width:20%">
                    <span>
                      Cheque Amount ( in Rs.) *
                    </span>
                  </th>
                  <td mat-cell *matCellDef="let element">
                    <mat-form-field>
                      <input matInput class="text-right" [(ngModel)]="element.chequeAmount"
                        value="{{element.chequeAmount}}" (keypress)="directiveObject.decimalKeyPress($event)"
                        (blur)="directiveObject.decimalPoint(element,'chequeAmount')"
                        [ngModelOptions]="{standalone: true}" required [disabled]="element.isGenerateChequeNo">
                    </mat-form-field>
                  </td>
                  <td mat-footer-cell *matFooterCellDef class="text-right">
                    {{ directiveObject.totalChequeAmount(LcAdviceReceiptDataSource.data) | number:'1.2-2'}}</td>
                </ng-container>

                <!-- Action View/Edit/Delete Column -->
                <ng-container matColumnDef="action">
                  <th mat-header-cell *matHeaderCellDef scope="row" scope="row" [ngStyle]="{'width':'4%'}">Action</th>
                  <td mat-cell *matCellDef="let element; let i=index">
                    <table class="iconTable" aria-describedby="actionBtn">
                      <tbody>
                        <tr>
                          <td width="30">
                            <i class="material-icons plus add" aria-hidden="true"
                              *ngIf="LcAdviceReceiptDataSource && LcAdviceReceiptDataSource.data && (i == LcAdviceReceiptDataSource.data.length - 1)"
                              (click)="onChequeSeriesAdd(element);">
                              add
                            </i>
                          </td>
                          <!-- *ngIf="(LcAdviceReceiptDataSource && LcAdviceReceiptDataSource.data && LcAdviceReceiptDataSource.data.length > 0)&&!element.isGenerateChequeNo" -->

                          <td width="30">
                            <i class="material-icons plus delete" aria-hidden="true" *ngIf="!element.chequeNo"
                              (click)="deleteEPaymentRow(element,i)">
                              delete
                            </i>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </td>
                  <td mat-footer-cell *matFooterCellDef> </td>
                </ng-container>

                <!-- Header and Footer Row Definition -->
                <tr mat-header-row *matHeaderRowDef="['parent1']" class="example-second-header-row">
                </tr>
                <tr mat-header-row *matHeaderRowDef="LcAdviceReceiptDATAColumn"></tr>
                <tr mat-row *matRowDef="let row; columns: LcAdviceReceiptDATAColumn;"></tr>
                <tr mat-footer-row *matFooterRowDef="LcAdviceReceiptDATAColumn"></tr>
              </table>
              <!-- Advice Receipt Table Ends -->
            </div>

            <!-- ePayment Table -->
            <div class="mat-elevation-z8" *ngIf="showEpaymentTable">
              <div class="row" *ngIf="showEpaymentTable">
                <!-- Input Field for Cheque List Type -->
                <div class="col-sm-3">
                  <mat-form-field class="full-width">
                    <mat-select placeholder="Cheque List Type" [formControl]="chequeTypeCheck"
                      [(value)]="chequeTypeCheck.value" required>
                      <mat-option>
                        <ngx-mat-select-search [formControl]="checkTypeCtrl"
                          [placeholderLabel]="'Select Cheque List Type...'"
                          [noEntriesFoundLabel]="'no matching Cheque List Type'"
                          (keypress)="directiveObject.onlyAlphabetsAndSpace($event)">
                        </ngx-mat-select-search>
                      </mat-option>
                      <mat-option *ngFor="let CT  of checkType | filterSelectInput: checkTypeCtrl.value:'name'"
                        [value]="CT.id">
                        {{CT.name}}
                      </mat-option>
                    </mat-select>
                    <div class="error-wrapper" *ngIf="chequeTypeCheck.touched
                    && chequeTypeCheck.errors">
                      <mat-error *ngIf="chequeTypeCheck.errors.required">
                        {{errorMessage.CHEQUE_TYPE}}
                      </mat-error>
                    </div>

                  </mat-form-field>
                </div>
                <!-- Button for Search -->
                <div class="col-sm-3">
                  <button type="button" mat-raised-button color="primary" title="Search"
                    (click)="checkDialog(chequeTypeCheck.value!='3',chequeTypeCheck.value)"
                    [disabled]="!chequeTypeCheck.value">
                    <i class="material-icons" title="Search" aria-hidden="true">search</i>Search</button>
                </div>
              </div>
              <!-- LC Adivice Receipt ePayment Table Starts -->
              <table mat-table [dataSource]="LcAdviceReceiptEPaymentDataSource" class="mat-elevation-z8 "
                area-describedby="advice-receipt-e-payment">

                <!-- Header Column -->
                <ng-container matColumnDef="parent1">
                  <th mat-header-cell *matHeaderCellDef scope="row" colspan="6" class="centerAlign">E-Payment Details
                  </th>
                </ng-container>
                <!-- Serial Number Column -->
                <ng-container matColumnDef="srno">
                  <th mat-header-cell *matHeaderCellDef scope="row" style="width:5%">
                    Sr. No.
                  </th>
                  <td mat-cell *matCellDef="let element; let i = index" class="centerAlign">
                    {{ i + 1 }}
                  </td>
                  <td mat-footer-cell *matFooterCellDef></td>
                </ng-container>
                <!-- Party Name Column -->
                <ng-container matColumnDef="partyName">
                  <th mat-header-cell *matHeaderCellDef scope="row" style="width:40%">Party Name</th>
                  <td mat-cell *matCellDef="let element">
                    <mat-form-field>
                      <input matInput [(ngModel)]="element.vendorName" [ngModelOptions]="{standalone: true}" required
                        readonly>
                    </mat-form-field>
                  </td>
                  <td mat-footer-cell *matFooterCellDef>E-Payment Total ( in Rs. )</td>
                </ng-container>

                <!-- Bank Account Number Column -->
                <ng-container matColumnDef="bankAccountNumber">
                  <th mat-header-cell *matHeaderCellDef scope="row">Bank Account Number</th>
                  <td mat-cell *matCellDef="let element">
                    <mat-form-field>
                      <input matInput [(ngModel)]="element.accNo" [ngModelOptions]="{standalone: true}" required
                        readonly>
                    </mat-form-field>
                  </td>
                  <td mat-footer-cell *matFooterCellDef></td>
                </ng-container>

                <!-- IFSC Code Column -->
                <ng-container matColumnDef="IFSCCode">
                  <th mat-header-cell *matHeaderCellDef scope="row">IFSC Code</th>
                  <td mat-cell *matCellDef="let element">
                    <mat-form-field>
                      <input matInput [(ngModel)]="element.ifscCode" [ngModelOptions]="{standalone: true}" required
                        readonly>
                    </mat-form-field>
                  </td>
                  <td mat-footer-cell *matFooterCellDef></td>
                </ng-container>

                <!-- ePayment Amount Column -->
                <ng-container matColumnDef="epaymentAmount">
                  <th mat-header-cell *matHeaderCellDef scope="row">E-Payment Amount ( in Rs.) *</th>
                  <td mat-cell *matCellDef="let element" class="rightAlign">

                    {{ +element.epayAmnt | number:'1.2-2'}}
                  </td>
                  <td mat-footer-cell *matFooterCellDef class="text-right">
                    {{ totalEPaymentAmount() | number:'1.2-2'}}</td>
                </ng-container>

                <!-- Action View/Edit/Delete Column -->
                <ng-container matColumnDef="action">
                  <th mat-header-cell *matHeaderCellDef scope="row" scope="row" [ngStyle]="{'width':'4%'}">Action</th>
                  <td mat-cell *matCellDef="let element; let i=index">
                    <table class="iconTable" aria-describedby="actionBtn">
                      <tbody>
                        <tr>
                          <td width="30" (click)="deleteEPaymentRow(element,i)" *ngIf="!element.sdId">
                            <i class="material-icons plus delete" aria-hidden="true"
                              *ngIf="(LcAdviceReceiptEPaymentDataSource.data.length > 0)">
                              delete
                            </i>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </td>
                  <td mat-footer-cell *matFooterCellDef> </td>
                </ng-container>

                <!-- Header and Footer Row Definition -->
                <tr mat-header-row *matHeaderRowDef="['parent1']" class="example-second-header-row">
                </tr>
                <tr mat-header-row *matHeaderRowDef="LcAdviceReceiptEPaymentDATAColumn"></tr>
                <tr mat-row *matRowDef="let row; columns: LcAdviceReceiptEPaymentDATAColumn;"></tr>
                <tr mat-footer-row *matFooterRowDef="LcAdviceReceiptEPaymentDATAColumn"></tr>
              </table>
              <!-- LC Adivice Receipt ePayment Table Ends -->
            </div>

          </div>

          <div class="form-action-button">

            <button *ngIf="showEpaymentTable" type="submit" mat-raised-button color="primary"
              (click)="saveEpaymentDetails()">
              Save & Proceed
              <i class="material-icons" aria-hidden="true" title="Next">
                chevron_right
              </i>
            </button>


            <button *ngIf="showChequeTable" type="submit" mat-raised-button color="primary"
              (click)="saveChequeDetails()">
              Save & Proceed
              <i class="material-icons" aria-hidden="true" title="Next">
                chevron_right
              </i>
            </button>

            <button *ngIf="showChequeTable" type="button" mat-raised-button color="primary" title="Generate Cheque No."
              (click)="validateCheqfields()">
              <i class="material-icons" title="Generate Cheque Number" aria-hidden="true">
                note_add
              </i>
              Generate Cheque No.
            </button>


            <button *ngIf="showChequeTable && chequeEpaymentsavedFlag" type="button" mat-raised-button class="print-btn"
              title="Print Cheque" (click)="onPrintCheque()">
              <i class="material-icons" title="Print Cheque" aria-hidden="true">
                print
              </i>
              Print Cheque
            </button>
            <button type="button" mat-raised-button color="warn" title="Listing" (click)="gotoListing()"
              routerLinkActive="router-link-active">
              <i class="material-icons" title="Listing" aria-hidden="true">
                list
              </i>
              Listing
            </button>


          </div>
        </div>

      </mat-tab>
      <!-- Mat Tab for Cheque/E-Payment End -->

      <!-- Mat Tab for Detail Posting Starts -->
      <mat-tab [disabled]="!hdrId">

        <ng-template mat-tab-label>
          Posting Details
        </ng-template>

        <!-- Detail Posting -->
        <div class="box box-primary">
          <div class="box-header">Detail Postings</div>
          <div class="box-body">
            <form [formGroup]="lcPostingDetails">
              <div class="row">
                <!-- Input Field for Advice Type -->
                <div class="col-sm-4">
                  <mat-form-field class="full-width">
                    <mat-select formControlName="adviceType" placeholder="Advice Type">
                      <mat-option>
                        <ngx-mat-select-search [formControl]="AdviceTypeCtrl" [placeholderLabel]="'Find Advice Type...'"
                          [noEntriesFoundLabel]="'no matching Advice Type'">
                        </ngx-mat-select-search>
                      </mat-option>
                      <mat-option *ngFor="let AT of AdviceTypeList|
                      filterSelectInput: AdviceTypeCtrl.value:'adviceDesc'" [value]="AT.adviceId">
                        {{AT.adviceDesc}}
                      </mat-option>
                    </mat-select>
                    <div class="error-wrapper" *ngIf="lcPostingDetails.controls.adviceType.touched
                    && lcPostingDetails.controls.adviceType.errors">
                      <mat-error *ngIf="lcPostingDetails.controls.adviceType.errors.required">
                        {{errorMessage.ADVICE_TYPE}}
                      </mat-error>
                    </div>

                  </mat-form-field>

                </div>


                <!-- Input Field for Exemption -->
                <div class="col-sm-4" readonly>
                  <mat-form-field class="full-width" readonly>
                    <mat-select formControlName="exemption" placeholder="Exemption ">
                      <mat-option>
                        <ngx-mat-select-search [formControl]="ExemptionTypeCtrl"
                          [placeholderLabel]="'Find Advice Type...'" [noEntriesFoundLabel]="'no matching Advice Type'">
                        </ngx-mat-select-search>
                      </mat-option>
                      <mat-option *ngFor="let AT of ExemptionTypeList|
                    filterSelectInput: ExemptionTypeCtrl.value:'viewValue'" [value]="AT.value">
                        {{AT.viewValue}}
                      </mat-option>
                    </mat-select>
                  </mat-form-field>
                </div>

                <!-- Input Field for DDO Number -->
                <div class="col-sm-4">
                  <mat-form-field>
                    <input matInput placeholder="DDO Number" formControlName="ddoNumber" readonly>
                  </mat-form-field>
                </div>
              </div>
            </form>
            <form [formGroup]="lcAdviceReceivedForm1">

              <div class="box box-primary">
                <div class="box-header"></div>
                <div class="box-body">

                  <!-- Input Field for Advice Number -->
                  <div class="row">
                    <div class="col-sm-3">
                      <mat-form-field class="full-width">
                        <mat-select formControlName="fundType" placeholder="Fund
                          Type" required (selectionChange)='getDemandList()'>
                          <mat-option>
                            <ngx-mat-select-search [formControl]="fundTypeCtrl" [placeholderLabel]="'Find Fund Type...'"
                              [noEntriesFoundLabel]="'no matching Fund Type'"
                              (keypress)="directiveObject.onlyAlphabet($event)">
                            </ngx-mat-select-search>
                          </mat-option>
                          <mat-option *ngFor="let FT of FundList|
                            filterSelectInput: fundTypeCtrl.value:'name'" [value]="FT">
                            {{FT.name}}
                          </mat-option>
                        </mat-select>
                        <div class="error-wrapper" *ngIf="lcAdviceReceivedForm1.controls.fundType.touched
                        && lcAdviceReceivedForm1.controls.fundType.errors">
                          <mat-error *ngIf="lcAdviceReceivedForm1.controls.fundType.errors.required">
                            {{errorMessage.FUNDTYPE}}
                          </mat-error>
                        </div>


                      </mat-form-field>
                    </div>
                    <div class="col-sm-3" *ngIf="!publicAccoutFlag">
                      <mat-form-field class="full-width">
                        <mat-select formControlName="chargedVoted" placeholder="Class Of Expenditure" required
                          (selectionChange)='getDemandList()'>
                          <mat-option>
                            <ngx-mat-select-search [formControl]="chargedVotedCtrl"
                              [placeholderLabel]="'Find Class Of Expenditure...'" [noEntriesFoundLabel]="'no matching
                            Class Of Expenditure'" (keypress)="directiveObject.onlyAlphabet($event)">
                            </ngx-mat-select-search>
                          </mat-option>
                          <mat-option *ngFor="let chargedVoted of
                          ClassOfExpenditureList|
                          filterSelectInput: chargedVotedCtrl.value:'name'" [value]="chargedVoted">
                            {{chargedVoted.name}}
                          </mat-option>
                        </mat-select>
                        <div class="error-wrapper" *ngIf="lcAdviceReceivedForm1.controls.chargedVoted.touched
                        && lcAdviceReceivedForm1.controls.chargedVoted.errors">
                          <mat-error *ngIf="lcAdviceReceivedForm1.controls.chargedVoted.errors.required">
                            {{errorMessage.CHARGE_VOTED}}
                          </mat-error>
                        </div>

                      </mat-form-field>
                    </div>
                    <div class="col-sm-3" *ngIf="!publicAccoutFlag">
                      <mat-form-field class="full-width">
                        <mat-select formControlName="budgetType" placeholder="Budget Type" required
                          (selectionChange)='budgetChange()'>
                          <mat-option>
                            <ngx-mat-select-search [formControl]="budgetTypeCtrl"
                              [placeholderLabel]="'Find Budget Type...'" [noEntriesFoundLabel]="'no matching
                            Budget Type'" (keypress)="directiveObject.onlyAlphabet($event)">
                            </ngx-mat-select-search>
                          </mat-option>
                          <mat-option *ngFor="let budgetType of
                          BudgetTypeList|
                          filterSelectInput: budgetTypeCtrl.value:'name'" [value]="budgetType">
                            {{budgetType.name}}
                          </mat-option>
                        </mat-select>
                        <div class="error-wrapper" *ngIf="lcAdviceReceivedForm1.controls.budgetType.touched
                        && lcAdviceReceivedForm1.controls.budgetType.errors">
                          <mat-error *ngIf="lcAdviceReceivedForm1.controls.budgetType.errors.required">
                            {{errorMessage.BUDGET_TYPE}}
                          </mat-error>
                        </div>

                      </mat-form-field>
                    </div>



                    <div class="col-sm-3" *ngIf="!publicAccoutFlag">
                      <mat-form-field class="full-width">
                        <mat-select formControlName="specificbudgetType" placeholder="State/CSS" required
                        [disabled]="budgetDisable"
                          (selectionChange)='getDemandList()'>
                          <mat-option>
                            <ngx-mat-select-search [formControl]="specificbudgetTypeCtrl"
                              [placeholderLabel]="'Find Specific Budget Type...'" [noEntriesFoundLabel]="'no matching
                              Specific Budget Type'" (keypress)="directiveObject.onlyAlphabet($event)">
                            </ngx-mat-select-search>
                          </mat-option>
                          <mat-option *ngFor="let budgetType of
                          specificBudgetTypeList|
                          filterSelectInput: specificbudgetTypeCtrl.value:'name'" [value]="budgetType">
                            {{budgetType.viewValue}}
                          </mat-option>
                        </mat-select>
                        <div class="error-wrapper" *ngIf="lcAdviceReceivedForm1.controls.specificbudgetType.touched
                        && lcAdviceReceivedForm1.controls.specificbudgetType.errors">
                          <mat-error *ngIf="lcAdviceReceivedForm1.controls.specificbudgetType.errors.required">
                            {{errorMessage.BUDGET_TYPE}}
                          </mat-error>
                        </div>

                      </mat-form-field>
                    </div>





                    <div class="col-sm-3" *ngIf="!publicAccoutFlag">
                      <mat-form-field class="full-width">
                        <mat-select formControlName="demand" placeholder="Demand" required
                          (selectionChange)='getMajorHeadList()'>
                          <mat-option>
                            <ngx-mat-select-search [formControl]="demandCtrl" [placeholderLabel]="'Find Demand...'"
                              [noEntriesFoundLabel]="'no matching Demand
                            found'" (keypress)="directiveObject.onlyNumberwithDigitSpecific($event,3)">
                            </ngx-mat-select-search>
                          </mat-option>
                          <mat-option *ngFor="let demand of DemandNoList |
                          filterSelectInput: demandCtrl.value:'codeName'" [value]="demand">
                            {{demand.codeName}}
                          </mat-option>
                        </mat-select>
                        <div class="error-wrapper" *ngIf="lcAdviceReceivedForm1.controls.demand.touched
                        && lcAdviceReceivedForm1.controls.demand.errors">
                          <mat-error *ngIf="lcAdviceReceivedForm1.controls.demand.errors.required">
                            {{errorMessage.DEMAND}}
                          </mat-error>
                        </div>
                      </mat-form-field>
                    </div>
                    <div class="col-sm-3"  >
                      <mat-form-field class="full-width">
                        <mat-select formControlName="majorHead" placeholder="Major Head" required
                          (selectionChange)='getSubMajorHeadList()'>
                          <mat-option>
                            <ngx-mat-select-search [formControl]="majorHeadCtrl"
                              [placeholderLabel]="'Find Major Head...'" [noEntriesFoundLabel]="'no matching Major Head
                            found'"  (keypress)="directiveObject.onlyNumberwithDigitSpecific($event,4)">
                            </ngx-mat-select-search>
                          </mat-option>
                          <mat-option *ngFor="let majorHead of
                          MajorHeadList |
                          filterSelectInput: majorHeadCtrl.value:'codeName'" [value]="majorHead">
                            {{majorHead.codeName}}
                          </mat-option>
                        </mat-select>
                        <div class="error-wrapper" *ngIf="lcAdviceReceivedForm1.controls.majorHead.touched
                        && lcAdviceReceivedForm1.controls.majorHead.errors">
                          <mat-error *ngIf="lcAdviceReceivedForm1.controls.majorHead.errors.required">
                            {{errorMessage.MAJOR_HEAD}}
                          </mat-error>
                        </div>

                      </mat-form-field>
                    </div>
                    <div class="col-sm-3">
                      <mat-form-field class="full-width">
                        <mat-select formControlName="subMajorHead" placeholder="Sub Major Head" required
                          (selectionChange)='getMinorHeadList()'>

                          <mat-option>
                            <ngx-mat-select-search [formControl]="subMajorHeadCtrl"
                              [placeholderLabel]="'Find Sub Major Head...'" [noEntriesFoundLabel]="'no matching Sub Major
                            Head found'"  (keypress)="directiveObject.onlyNumberwithDigitSpecific($event,2)">
                            </ngx-mat-select-search>
                          </mat-option>
                          <mat-option *ngFor="let subMajorHead of
                          SubMajorHeadList |
                          filterSelectInput: subMajorHeadCtrl.value:'subMajorHead'" [value]="subMajorHead">
                            {{subMajorHead.codeName}}
                          </mat-option>
                        </mat-select>
                        <div class="error-wrapper" *ngIf="lcAdviceReceivedForm1.controls.subMajorHead.touched
                        && lcAdviceReceivedForm1.controls.subMajorHead.errors">
                          <mat-error *ngIf="lcAdviceReceivedForm1.controls.subMajorHead.errors.required">
                            {{errorMessage.SUB_MAJOR_HEAD}}
                          </mat-error>
                        </div>

                      </mat-form-field>
                    </div>
                    <div class="col-sm-3">
                      <mat-form-field class="full-width">
                        <mat-select formControlName="minorHead" placeholder="Minor Head" required
                          (selectionChange)='getSubheadList()'>

                          <mat-option>
                            <ngx-mat-select-search [formControl]="minorHeadCtrl"
                              [placeholderLabel]="'Find Minor Head...'" [noEntriesFoundLabel]="'no matching Minor Head
                            found'"  (keypress)="directiveObject.onlyNumberwithDigitSpecific($event,3)">
                            </ngx-mat-select-search>
                          </mat-option>
                          <mat-option *ngFor="let minorHead of
                          MinorHeadList |
                          filterSelectInput: minorHeadCtrl.value:'codeName'" [value]="minorHead">
                            {{minorHead.codeName}}
                          </mat-option>
                        </mat-select>
                        <div class="error-wrapper" *ngIf="lcAdviceReceivedForm1.controls.minorHead.touched
                        && lcAdviceReceivedForm1.controls.minorHead.errors">
                          <mat-error *ngIf="lcAdviceReceivedForm1.controls.minorHead.errors.required">
                            {{errorMessage.MINOR_HEAD}}
                          </mat-error>
                        </div>

                      </mat-form-field>
                    </div>
                    <div class="col-sm-3">
                      <mat-form-field class="full-width">
                        <mat-select formControlName="subHead" placeholder="Sub Head" required
                          (selectionChange)='getDetailHeadList()'>

                          <mat-option>
                            <ngx-mat-select-search [formControl]="subHeadCtrl" [placeholderLabel]="'Find Sub Head...'"
                              [noEntriesFoundLabel]="'no matching Sub
                            Head'"  (keypress)="directiveObject.onlyNumberwithDigitSpecific($event,2)">
                            </ngx-mat-select-search>
                          </mat-option>
                          <mat-option *ngFor="let subHead of SubHeadList|
                          filterSelectInput: subHeadCtrl.value:'codeName'" [value]="subHead">
                            {{subHead.codeName}}
                          </mat-option>
                        </mat-select>
                        <div class="error-wrapper" *ngIf="lcAdviceReceivedForm1.controls.subHead.touched
                        && lcAdviceReceivedForm1.controls.subHead.errors">
                          <mat-error *ngIf="lcAdviceReceivedForm1.controls.subHead.errors.required">
                            {{errorMessage.SUB_HEAD}}
                          </mat-error>
                        </div>

                      </mat-form-field>
                    </div>
                    <div class="col-sm-3">
                      <mat-form-field class="full-width">
                        <mat-select formControlName="detailHead" placeholder="Detailed Head" required
                          (selectionChange)='getBudgetEstimateTypeList()'>
                          <mat-option>
                            <ngx-mat-select-search [formControl]="detailHeadCtrl"
                              [placeholderLabel]="'Find Detail Head...'" [noEntriesFoundLabel]="'no matching Detail
                            Head'"  (keypress)="directiveObject.onlyNumberwithDigitSpecific($event,2)">
                            </ngx-mat-select-search>
                          </mat-option>
                          <mat-option *ngFor="let detailHead of
                          DetailClassList|
                          filterSelectInput: detailHeadCtrl.value:'codeName'" [value]="detailHead">
                            {{detailHead.codeName}}

                          </mat-option>
                        </mat-select>
                        <div class="error-wrapper" *ngIf="lcAdviceReceivedForm1.controls.detailHead.touched
                        && lcAdviceReceivedForm1.controls.detailHead.errors">
                          <mat-error *ngIf="lcAdviceReceivedForm1.controls.detailHead.errors.required">
                            {{errorMessage.DETAILED_HEAD}}
                          </mat-error>
                        </div>

                      </mat-form-field>
                    </div>
                    <div class="col-sm-3" *ngIf="!publicAccoutFlag">

                      <mat-form-field class="full-width">
                        <mat-select formControlName="typeOfEstimation" placeholder="Type Of Estimation" required
                          (selectionChange)='getItemList()'>
                          <mat-option>
                            <ngx-mat-select-search [formControl]="typeOfEstimationCTRL"
                              [placeholderLabel]="'Find Type Of Estimation...'" [noEntriesFoundLabel]="'no matching Detail
                            Head'"  (keypress)="directiveObject.onlyAlphabetsAndSpace($event)">
                            </ngx-mat-select-search>
                          </mat-option>
                          <mat-option *ngFor="let typeOfEstimation of
                          typeOfEstimationList|
                          filterSelectInput: typeOfEstimationCTRL.value:'name'" [value]="typeOfEstimation">
                            {{typeOfEstimation.name}}

                          </mat-option>
                        </mat-select>
                        <div class="error-wrapper" *ngIf="lcAdviceReceivedForm1.controls.typeOfEstimation.touched
                        && lcAdviceReceivedForm1.controls.typeOfEstimation.errors">
                          <mat-error *ngIf="lcAdviceReceivedForm1.controls.typeOfEstimation.errors.required">
                            {{errorMessage.ESTIMATION_TYPE}}
                          </mat-error>
                        </div>
                      </mat-form-field>


                    </div>
                    <div class="col-sm-3" *ngIf="!itemHideFlag && !publicAccoutFlag">

                      <mat-form-field class="full-width">
                        <mat-select formControlName="itemName" placeholder="Item Name / Work Name" required
                          (selectionChange)='getObjectClassList()'>
                          <mat-option>
                            <ngx-mat-select-search [formControl]="itemNameCTRL"
                              [placeholderLabel]="'Find Item Name / Work Name...'"
                              [noEntriesFoundLabel]="'No matching Item Name / Work Name Found'"
                              (keypress)="directiveObject.onlyNumberAndAlphabetsWithSpace($event)">
                            </ngx-mat-select-search>
                          </mat-option>
                          <mat-option *ngFor="let itemName of
                      itemNameList|
                      filterSelectInput: itemNameCTRL.value:'code'" [value]="itemName">
                            {{itemName.code}}

                          </mat-option>
                        </mat-select>
                        <div class="error-wrapper" *ngIf="lcAdviceReceivedForm1.controls.itemName.touched
                        && lcAdviceReceivedForm1.controls.itemName.errors">
                          <mat-error *ngIf="lcAdviceReceivedForm1.controls.itemName.errors.required">
                            {{errorMessage.ITEM_NAME}}
                          </mat-error>
                        </div>

                      </mat-form-field>


                    </div>
                    <div class="col-sm-3" *ngIf="!publicAccoutFlag">

                      <mat-form-field class="full-width">
                        <mat-select formControlName="objectClass" placeholder="Object Class"
                          (selectionChange)='resetLcFields()' required>
                          <mat-option>
                            <ngx-mat-select-search [formControl]="ObjectClassCTRL"
                              [placeholderLabel]="'Find Object Class...'"
                              [noEntriesFoundLabel]="'No matching Object Class Found'"
                              (keypress)="directiveObject.onlyNumberAndAlphabets($event)">
                            </ngx-mat-select-search>
                          </mat-option>
                          <mat-option *ngFor="let objectClass of
                  ObjectClassList|
                  filterSelectInput: ObjectClassCTRL.value:'codeName'" [value]="objectClass">
                            {{objectClass.codeName}}

                          </mat-option>
                        </mat-select>
                        <div class="error-wrapper" *ngIf="lcAdviceReceivedForm1.controls.objectClass.touched
                        && lcAdviceReceivedForm1.controls.objectClass.errors">
                          <mat-error *ngIf="lcAdviceReceivedForm1.controls.objectClass.errors.required">
                            {{errorMessage.OBJECT_CLASS}}
                          </mat-error>
                        </div>

                      </mat-form-field>
                    </div>

                    <div class="col-sm-3">
                      <mat-form-field>
                        <input matInput placeholder="Lc Number" formControlName="lcNumber" required readonly />
                        <button type="button" title="Search" mat-flat-button
                          (click)="searchAuthorizeTreasury(lcAdviceReceivedForm1,'form')" matSuffix>
                          <i class="material-icons plus add" title="Search" aria-hidden="true">search</i></button>
                        <div class="error-wrapper"
                          *ngIf="lcAdviceReceivedForm1.controls.lcNumber.touched && (lcAdviceReceivedForm1.controls.lcNumber.errors)">
                          <mat-error *ngIf="lcAdviceReceivedForm1.controls.lcNumber.errors.required">
                            {{ errorMessage.LC_NUMBER}}
                          </mat-error>
                        </div>

                      </mat-form-field>
                    </div>

                    <div class="col-sm-3">
                      <mat-form-field>
                        <input matInput (keypress)="decimalKeyPress($event)" formControlName="headwiseAmount"
                          placeholder="Head Wise Available Amount" required readonly />
                        <div class="error-wrapper"
                          *ngIf="lcAdviceReceivedForm1.controls.headwiseAmount.touched && (lcAdviceReceivedForm1.controls.headwiseAmount.errors)">
                          <mat-error *ngIf="lcAdviceReceivedForm1.controls.headwiseAmount.errors.required">
                            {{ errorMessage.HEADWISE_AMOUNT}}
                          </mat-error>
                        </div>

                      </mat-form-field>
                    </div>

                    <div class="col-sm-3">
                      <mat-form-field>
                        <input matInput (keypress)="decimalKeyPress($event)" [(ngModel)]="value"
                          (ngModelChange)="validateValue($event,'form',lcAdviceReceivedForm1)"
                          formControlName="expenditureAmount" placeholder="Expenditure Amount" required />
                        <div class="error-wrapper"
                          *ngIf="lcAdviceReceivedForm1.controls.expenditureAmount.touched && (lcAdviceReceivedForm1.controls.expenditureAmount.errors)">
                          <mat-error *ngIf="lcAdviceReceivedForm1.controls.expenditureAmount.errors.required">
                            {{ errorMessage.EXPENDITURE_AMOUNT}}
                          </mat-error>
                        </div>

                      </mat-form-field>

                    </div>

                  </div>

                  <!-- Show Total of Opening Balance and New Balance -->
                </div>
              </div>

              <!-- Action Buttons Starts -->
              <div class="form-action-button">


                <button type="button" title="Add" mat-raised-button (click)="getOnAddData()" color="primary"
                *ngIf="!publicAccoutFlag && !itemHideFlag "
                  [disabled]="!lcAdviceReceivedForm1.value.fundType ||
                              !lcAdviceReceivedForm1.value.chargedVoted ||
                              !lcAdviceReceivedForm1.value.budgetType ||
                              !lcAdviceReceivedForm1.value.demand ||
                              !lcAdviceReceivedForm1.value.majorHead ||
                              !lcAdviceReceivedForm1.value.subMajorHead ||
                              !lcAdviceReceivedForm1.value.minorHead ||
                              !lcAdviceReceivedForm1.value.subHead ||
                              !lcAdviceReceivedForm1.value.detailHead ||
                              !lcAdviceReceivedForm1.value.typeOfEstimation ||
                              !lcAdviceReceivedForm1.value.itemName ||
                              !lcAdviceReceivedForm1.value.objectClass ||
                              !lcAdviceReceivedForm1.value.lcNumber ||
                              !lcAdviceReceivedForm1.value.headwiseAmount ||
                              !lcAdviceReceivedForm1.value.expenditureAmount
                              "
                  >
                  <i class="material-icons" title="Add" aria-hidden="true">
                    add_circle_outline
                  </i>Add</button>

                  <button type="button" title="Add" mat-raised-button (click)="getOnAddData()" color="primary"
                  *ngIf="publicAccoutFlag"
                  [disabled]="!lcAdviceReceivedForm1.value.fundType ||
                              !lcAdviceReceivedForm1.value.majorHead ||
                              !lcAdviceReceivedForm1.value.subMajorHead ||
                              !lcAdviceReceivedForm1.value.minorHead ||
                              !lcAdviceReceivedForm1.value.subHead ||
                              !lcAdviceReceivedForm1.value.detailHead ||
                              !lcAdviceReceivedForm1.value.lcNumber ||
                              !lcAdviceReceivedForm1.value.headwiseAmount ||
                              !lcAdviceReceivedForm1.value.expenditureAmount
                              "
                  >
                  <i class="material-icons" title="Add" aria-hidden="true">
                    add_circle_outline
                  </i>Add</button>

                  <button type="button" title="Add" mat-raised-button (click)="getOnAddData()" color="primary"
                  *ngIf="!publicAccoutFlag && itemHideFlag "
                  [disabled]="!lcAdviceReceivedForm1.value.fundType ||
                              !lcAdviceReceivedForm1.value.chargedVoted ||
                              !lcAdviceReceivedForm1.value.budgetType ||
                              !lcAdviceReceivedForm1.value.demand ||
                              !lcAdviceReceivedForm1.value.majorHead ||
                              !lcAdviceReceivedForm1.value.subMajorHead ||
                              !lcAdviceReceivedForm1.value.minorHead ||
                              !lcAdviceReceivedForm1.value.subHead ||
                              !lcAdviceReceivedForm1.value.detailHead ||
                              !lcAdviceReceivedForm1.value.typeOfEstimation ||
                              !lcAdviceReceivedForm1.value.objectClass ||
                              !lcAdviceReceivedForm1.value.lcNumber ||
                              !lcAdviceReceivedForm1.value.headwiseAmount ||
                              !lcAdviceReceivedForm1.value.expenditureAmount
                              "
                  >
                  <i class="material-icons" title="Add" aria-hidden="true">
                    add_circle_outline
                  </i>Add</button>



                <button type="reset" mat-raised-button color="accent" title="Reset" (click)="reset()">
                  <i class="material-icons" title="Reset" aria-hidden="true">
                    restore
                  </i>
                  Reset
                </button>

              </div>
              <!-- Action Buttons Ends -->

            </form>
            <div class="mat-elevation-z8 mt-2 overflow-x-scroll lc-advice-received">
              <!-- Detail Posting Table Starts -->

              <!-- original table -->

              <!-- original table ends -->

              <table mat-table [dataSource]="DetailPostingDataSource" multiTemplateDataRows aria-describedby="recovery"
                area-describedby="detail-posting">

                <!-- Header Column -->
                <ng-container matColumnDef="parent1">
                  <th mat-header-cell *matHeaderCellDef scope="row" colspan="19" class="centerAlign">Detail Posting
                  </th>
                </ng-container>

                <!-- Fund Column -->
                <ng-container matColumnDef="fund">
                  <th mat-header-cell *matHeaderCellDef scope="row" scope="row">Fund</th>
                  <td mat-cell *matCellDef="let element">
                    {{element.fundType}}
                  </td>
                  <td mat-footer-cell *matFooterCellDef>Expenditure Total ( in Rs.)</td>
                </ng-container>

                <!-- Class of Expenditure Column -->
                <ng-container matColumnDef="classOfExpenditure">
                  <th mat-header-cell *matHeaderCellDef scope="row" scope="row">Class Of Expenditure
                  </th>
                  <td mat-cell *matCellDef="let element">
                    {{element.classExpend}}

                  </td>
                  <td mat-footer-cell *matFooterCellDef></td>
                </ng-container>

                <!-- Budget Type Column -->
                <ng-container matColumnDef="budgetType">
                  <th mat-header-cell *matHeaderCellDef scope="row" scope="row">Budget Type</th>
                  <td mat-cell *matCellDef="let element">
                    {{element.amountType}}

                  </td>
                  <td mat-footer-cell *matFooterCellDef></td>
                </ng-container>

                <!-- Demand Number Column -->
                <ng-container matColumnDef="demandNo">
                  <th mat-header-cell *matHeaderCellDef scope="row" scope="row">Demand</th>
                  <td mat-cell *matCellDef="let element">
                    {{element.demandCode}}
                  </td>
                  <td mat-footer-cell *matFooterCellDef></td>
                </ng-container>

                <!-- Major Head Column -->
                <ng-container matColumnDef="majorHead">
                  <th mat-header-cell *matHeaderCellDef scope="row" scope="row">Major Head</th>
                  <td mat-cell *matCellDef="let element">
                    {{element.majorHeadName}}

                  </td>
                  <td mat-footer-cell *matFooterCellDef></td>
                </ng-container>

                <!-- Sub Major Head Column -->
                <ng-container matColumnDef="subMajorHead">
                  <th mat-header-cell *matHeaderCellDef scope="row" scope="row">Sub Major Head</th>
                  <td mat-cell *matCellDef="let element">
                    {{element.subMajorHeadName}}

                  </td>
                  <td mat-footer-cell *matFooterCellDef></td>
                </ng-container>

                <!-- Minor Head Column -->
                <ng-container matColumnDef="minorHead">
                  <th mat-header-cell *matHeaderCellDef scope="row" scope="row">Minor Head</th>
                  <td mat-cell *matCellDef="let element">
                    {{element.minorHeadName}}

                  </td>
                  <td mat-footer-cell *matFooterCellDef></td>
                </ng-container>

                <!-- Sub Head Column -->
                <ng-container matColumnDef="subHead">
                  <th mat-header-cell *matHeaderCellDef scope="row" scope="row">Sub Head</th>
                  <td mat-cell *matCellDef="let element">
                    {{element.subHeadName}}

                  </td>
                  <td mat-footer-cell *matFooterCellDef></td>
                </ng-container>

                <!-- Detail Class Column -->
                <ng-container matColumnDef="detailClass">
                  <th mat-header-cell *matHeaderCellDef scope="row" scope="row">Detailed Head</th>
                  <td mat-cell *matCellDef="let element">
                    {{element.detailHeadName}}

                  </td>
                  <td mat-footer-cell *matFooterCellDef></td>
                </ng-container>

                <!-- Type of Estimation Column -->
                <ng-container matColumnDef="typeOfEstimation">
                  <th mat-header-cell *matHeaderCellDef scope="row" scope="row">Type of Estimate</th>
                  <td mat-cell *matCellDef="let element" width="30">
                    {{element.typeOfEstimate}}

                  </td>
                  <td mat-footer-cell *matFooterCellDef></td>
                </ng-container>

                <!-- Item Name Column -->
                <ng-container matColumnDef="itemName">
                  <th mat-header-cell *matHeaderCellDef scope="row" scope="row">Item Name / Work Name
                  </th>
                  <td mat-cell *matCellDef="let element;let i=index">
                    {{element.itemWorkName}}
                  </td>
                  <td mat-footer-cell *matFooterCellDef></td>
                </ng-container>

                <!-- Object Class Column -->
                <ng-container matColumnDef="objectClass">
                  <th mat-header-cell *matHeaderCellDef scope="row" scope="row">Object Class</th>
                  <td mat-cell *matCellDef="let element">
                    {{element.objectClass}}

                  </td>
                  <td mat-footer-cell *matFooterCellDef></td>
                </ng-container>

                <!-- Scheme Number Column -->
                <ng-container matColumnDef="schemeNo">
                  <th mat-header-cell *matHeaderCellDef scope="row" scope="row">Scheme No</th>
                  <td mat-cell *matCellDef="let element">
                    {{element.schemeNo}}
                  </td>
                  <td mat-footer-cell *matFooterCellDef> </td>
                </ng-container>

                <!-- Map ePayment Column -->
                <ng-container matColumnDef="mapEpayment">
                  <th mat-header-cell *matHeaderCellDef scope="row" scope="row">Map E-Payment</th>
                  <td mat-cell *matCellDef="let element" class="text-center">
                    <div *ngIf="showEpaymentTable; then isEPay else notEPay "></div>

                    <!-- (click)="expandedElement = (expandedElement === element) ? null : element" -->
                    <ng-template #isEPay>
                      <i class="material-icons plus add" aria-hidden="true" (click)="mapEPayment(element);">
                        launch</i>
                    </ng-template>

                    <ng-template #notEPay>
                      <i class="material-icons plus add" aria-hidden="true">
                        launch</i>
                    </ng-template>

                  </td>
                  <td mat-footer-cell *matFooterCellDef></td>
                </ng-container>

                <!-- Expenditure Amount Column -->
                <ng-container matColumnDef="expenditureAmount">
                  <th mat-header-cell *matHeaderCellDef scope="row" scope="row">Expenditure Amount *
                  </th>
                  <td mat-cell *matCellDef="let element;let i=index" width="20">
                    <mat-form-field class="example-full-width rightAlign">
                      <input matInput class="text-right" [(ngModel)]="element.expenditureAmount"
                        (ngModelChange)="validateValue($event,'table',element)" value="{{element.expenditureAmount}}"
                        (blur)="directiveObject.decimalPoint(element,'expenditureAmount')"
                        [ngModelOptions]="{standalone: true}">
                    </mat-form-field>
                  </td>
                  <td mat-footer-cell *matFooterCellDef class="rightAlign">
                    {{ directiveObject.totalexpenditureAmount(DetailPostingDataSource.data) | number:'1.2-2'}} </td>
                </ng-container>

                <!-- Headwise Available Amount Column -->
                <ng-container matColumnDef="headwiseAvailableAmount">
                  <th mat-header-cell *matHeaderCellDef scope="row" scope="row">Headwise Available
                    Amount *
                  </th>
                  <td mat-cell *matCellDef="let element;let i=index" width="10">
                    <mat-form-field class="example-full-width rightAlign">
                      <input matInput class="text-right" [(ngModel)]="element.availableAmount"
                        value="{{element.availableAmount}}" (keypress)="directiveObject.decimalPoint($event)"
                        (blur)="directiveObject.decimalPoint(element,'availableAmount')"
                        [ngModelOptions]="{standalone: true}" readonly>
                    </mat-form-field>
                  </td>
                  <td mat-footer-cell *matFooterCellDef class="rightAlign">
                    {{directiveObject.totalHeadWiseAvailableAmount(DetailPostingDataSource.data) | number:'1.2-2'}}
                  </td>
                </ng-container>

                <!-- LC Number Column -->
                <ng-container matColumnDef="lcNumber">
                  <th mat-header-cell *matHeaderCellDef scope="row" scope="row">LC Number *</th>
                  <td mat-cell *matCellDef="let element">
                    {{element.lcNumber}}
                  </td>
                  <td mat-footer-cell *matFooterCellDef></td>
                </ng-container>

                <!-- Search Column -->
                <ng-container matColumnDef="search">
                  <th mat-header-cell *matHeaderCellDef scope="row" scope="row">Select LC Number</th>
                  <td mat-cell *matCellDef="let element" class="text-center">
                    <i class="material-icons plus add" aria-hidden="true"
                      (click)="searchAuthorizeTreasury(element,'table')">
                      search</i>
                  </td>
                  <td mat-footer-cell *matFooterCellDef></td>
                </ng-container>

                <!-- Action View/Edit/Delete Column -->
                <ng-container matColumnDef="action">
                  <th mat-header-cell *matHeaderCellDef scope="row" scope="row" [ngStyle]="{'width':'4%'}">Action</th>
                  <td mat-cell *matCellDef="let element; let i=index">
                    <table class="iconTable" aria-describedby="actionBtn">
                      <tbody>
                        <tr>

                          <td width="30">
                            <i class="material-icons plus delete" aria-hidden="true"
                              (click)="deleteDetailsPostingRow(element.index,element)"
                              *ngIf="(DetailPostingDataSource && DetailPostingDataSource.data && DetailPostingDataSource.data.length > 0)">
                              delete
                            </i>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </td>
                  <td mat-footer-cell *matFooterCellDef> </td>
                </ng-container>

                <!-- Rows with Expansion Table -->
                <ng-container matColumnDef="expandedDetail">
                  <tr>
                    <td mat-cell *matCellDef="let element" [attr.colspan]="19">
                      <div class="element-detail"
                        [@expandRow]="(element === expandedElement && showEpaymentTable)? 'expanded' : 'collapsed'">
                        <div class="row">

                          <div class="col-sm-2"></div>

                          <div class="col-sm-8">
                            <div class="mat-elevation-z8 mt-2 overflow-x-auto">
                              <table mat-table [dataSource]="expandDataSource" area-describedby="expandEpaymentTable">

                                <!-- Header Column -->
                                <ng-container matColumnDef="parent1">
                                  <th mat-header-cell *matHeaderCellDef scope="row" [attr.colspan]="4"
                                    class="centerAlign">Map
                                    epayment details with particular head structure</th>
                                </ng-container>

                                <!-- Party Name Column -->
                                <ng-container matColumnDef="partyName">
                                  <th mat-header-cell *matHeaderCellDef width="35%" scope="row">Party Name</th>
                                  <td mat-cell *matCellDef="let element">
                                    <mat-form-field>
                                      <input matInput [value]="element.partyName" [(ngModel)]="element.partyName"
                                        [ngModelOptions]="{standalone: true}" disabled>
                                    </mat-form-field>
                                  </td>
                                </ng-container>

                                <!-- Bank Account Number Column -->
                                <ng-container matColumnDef="bankAccountNumber">
                                  <th mat-header-cell *matHeaderCellDef width="20%" scope="row">Bank Account Number
                                  </th>
                                  <td mat-cell *matCellDef="let element">
                                    <mat-form-field>
                                      <input matInput [value]="element.bankAccountNumber"
                                        [(ngModel)]="element.bankAccountNumber" [ngModelOptions]="{standalone: true}"
                                        disabled>
                                    </mat-form-field>
                                  </td>
                                </ng-container>

                                <!-- IFSC Code Column -->
                                <ng-container matColumnDef="IFSCCode">
                                  <th mat-header-cell *matHeaderCellDef width="20%" scope="row">IFSC Code</th>
                                  <td mat-cell *matCellDef="let element">
                                    <mat-form-field>
                                      <input matInput [value]="element.IFSCCode" [(ngModel)]="element.IFSCCode"
                                        [ngModelOptions]="{standalone: true}" disabled>
                                    </mat-form-field>
                                  </td>
                                </ng-container>

                                <!-- ePayment Amount Column -->
                                <ng-container matColumnDef="epaymentAmount">
                                  <th mat-header-cell *matHeaderCellDef width="20%" scope="row">E-Payment Amount (in
                                    Rs.) *
                                  </th>
                                  <td mat-cell *matCellDef="let element">
                                    <mat-form-field class="rightAlign">
                                      <input matInput [value]="element.epaymentAmount"
                                        [(ngModel)]="element.epaymentAmount" decimalLimitTwoOnly decimalPoint2
                                        [ngModelOptions]="{standalone: true}">
                                    </mat-form-field>
                                  </td>
                                </ng-container>

                                <!-- Header and Footer Row Definition -->
                                <!-- <tr mat-header-row *matHeaderRowDef="['parent1']"></tr> -->
                                <tr mat-header-row *matHeaderRowDef="expandDataColumn"></tr>
                                <tr mat-row *matRowDef="let row; columns: expandDataColumn;"></tr>
                              </table>
                            </div>
                          </div>

                          <div class="col-sm-2"></div>
                        </div>
                      </div>
                    </td>
                  </tr>
                </ng-container>

                <!-- Header and Footer Row Definition -->
                <tr mat-header-row *matHeaderRowDef="['parent1']"></tr>
                <tr mat-header-row *matHeaderRowDef="DetailPostingColumn"></tr>
                <tr mat-row *matRowDef="let row; let i = index;columns:DetailPostingColumn"></tr>
                <tr mat-row *matRowDef="let row; columns: ['expandedDetail']" class="expanded-row"></tr>
                <tr mat-footer-row *matFooterRowDef="DetailPostingColumn"></tr>
              </table>


              <!-- Detail Posting Table Starts -->
            </div>

            <br>

          </div>
        </div>

        <div class="form-action-button">


          <button type="submit" mat-raised-button color="primary" (click)="postingDetailsSaveAndProcess()"
            [disabled]="DetailPostingDataSource.data.length == 0 || !chequeEpaymentsavedFlag">
            Save & Proceed
            <i class="material-icons" aria-hidden="true" title="Next">
              chevron_right
            </i>
          </button>
          <button type="button" mat-raised-button color="warn" title="Listing" (click)="gotoListing()"
            routerLinkActive="router-link-active">
            <i class="material-icons" title="Listing" aria-hidden="true">
              list
            </i>
            Listing
          </button>

        </div>


      </mat-tab>
      <!-- Mat Tab for Detail Posting End -->

      <!-- Mat Tab for List of Deductions Starts -->
      <mat-tab [disabled]="!hdrId">

        <ng-template mat-tab-label>
          Deduction Details
        </ng-template>


        <form [formGroup]="deductionDetailsForm">
          <!-- List of Deductions -->
          <div class="box box-primary">
            <div class="box-header">List of Deductions</div>
            <div class="box-body">
              <div class="row">

                <!-- Professional Tax Column -->
                <div class="col-sm-3">
                  <mat-form-field class="example-full-width ">
                    <input matInput formControlName="professionlTax" placeholder="Professional Tax (9570)"
                      (keypress)="directiveObject.decimalKeyPress($event)"
                      (blur)="totalDeductionAmount();formDecimalPoint($event)" decimalLimitTwoOnly>
                  </mat-form-field>
                </div>

                <!-- Labour Class Column -->
                <div class="col-sm-3">
                  <mat-form-field class="example-full-width ">
                    <input matInput formControlName="laborClass" placeholder="Labor Class (9528)"
                      (blur)="totalDeductionAmount() ;formDecimalPoint($event)"
                      (keypress)="directiveObject.decimalKeyPress($event)" decimalLimitTwoOnly>
                  </mat-form-field>
                </div>

                <!-- For All MH Column -->
                <div class="col-sm-3">
                  <mat-form-field class="example-full-width ">
                    <input matInput formControlName="allMh" (keypress)="directiveObject.decimalKeyPress($event)"
                      (blur)="totalDeductionAmount();formDecimalPoint($event)" placeholder="For All M.H. (9998)"
                      decimalLimitTwoOnly>
                  </mat-form-field>
                </div>

                <!-- Income Tax Column -->
                <div class="col-sm-3">
                  <mat-form-field class="example-full-width ">
                    <input matInput formControlName="incomeTax" placeholder="Income Tax (9510)"
                      (blur)="totalDeductionAmount();formDecimalPoint($event)"
                      (keypress)="directiveObject.decimalKeyPress($event)" decimalLimitTwoOnly>
                  </mat-form-field>
                </div>

                <!-- Surcharge Column -->
                <div class="col-sm-3">
                  <mat-form-field class="example-full-width ">
                    <input matInput formControlName="surCharge" placeholder="Surcharge (9520)"
                      (blur)="totalDeductionAmount();formDecimalPoint($event)"
                      (keypress)="directiveObject.decimalKeyPress($event)" decimalLimitTwoOnly>
                  </mat-form-field>
                </div>

                <!-- GPF Class IV Column -->
                <div class="col-sm-3">
                  <mat-form-field class="example-full-width ">
                    <input matInput formControlName="gpfClass" placeholder="GPF Class IV (9531)"
                      (blur)="totalDeductionAmount();formDecimalPoint($event)"
                      (keypress)="directiveObject.decimalKeyPress($event)" decimalLimitTwoOnly>
                  </mat-form-field>
                </div>

                <!-- CPF (9690) Column -->
                <div class="col-sm-3">
                  <mat-form-field class="">
                    <input matInput formControlName="cpf" placeholder="CPF (9690)"
                      (keypress)="directiveObject.decimalKeyPress($event)" decimalLimitTwoOnly
                      (blur)="totalDeductionAmount();formDecimalPoint($event)">
                  </mat-form-field>
                </div>

                <!-- Rent of Building Column -->
                <div class="col-sm-3">
                  <mat-form-field class="example-full-width ">
                    <input matInput formControlName="buildingRent" placeholder="Rent Of Bldg. (9550)"
                      (blur)="totalDeductionAmount();formDecimalPoint($event)"
                      (keypress)="directiveObject.decimalKeyPress($event)" decimalLimitTwoOnly>
                  </mat-form-field>
                </div>

                <!-- Government Insurance Fund Column -->
                <div class="col-sm-3">
                  <mat-form-field class="example-full-width ">
                    <input matInput formControlName="governmentInsurance" placeholder="Govt Insu. Fund (9581)"
                      (keypress)="directiveObject.decimalKeyPress($event)" decimalLimitTwoOnly
                      (blur)="formDecimalPoint($event)">
                  </mat-form-field>
                </div>

                <!-- Insurance Fund Column -->
                <div class="col-sm-3">
                  <mat-form-field class="example-full-width ">
                    <input matInput formControlName="insuranceFund" placeholder="Insurance Fund (9582)"
                      (blur)="totalDeductionAmount();formDecimalPoint($event)"
                      (keypress)="directiveObject.decimalKeyPress($event)" decimalLimitTwoOnly>
                  </mat-form-field>
                </div>

                <!-- Security Deposite Column -->
                <div class="col-sm-3">
                  <mat-form-field class="example-full-width ">
                    <input matInput formControlName="securityDeposit" placeholder="Security Deposit (9600)"
                      (blur)="totalDeductionAmount();formDecimalPoint($event)"
                      (keypress)="directiveObject.decimalKeyPress($event)" decimalLimitTwoOnly>
                  </mat-form-field>
                </div>

                <!-- Establishment Charges Column -->
                <div class="col-sm-3">
                  <mat-form-field class="example-full-width ">
                    <input matInput formControlName="establishmentCharges" placeholder="Establishment Charges 7%"
                      (blur)="totalDeductionAmount();formDecimalPoint($event)"
                      (keypress)="directiveObject.decimalKeyPress($event)" decimalLimitTwoOnly>
                  </mat-form-field>
                </div>

                <!-- Machinary Charges Column -->
                <div class="col-sm-3">
                  <mat-form-field class="example-full-width ">
                    <input matInput formControlName="machineryCharges" placeholder="Machinary Charges 2%"
                      (blur)="totalDeductionAmount();formDecimalPoint($event)"
                      (keypress)="directiveObject.decimalKeyPress($event)" decimalLimitTwoOnly>
                  </mat-form-field>
                </div>


              </div>
            </div>
          </div>

          <!-- Expanse Summary Starts -->
          <div class="box box-primary">
            <div class="expense-summery-header">
              <div class="row">
                <div class="col-sm-6">
                  Expense Summary
                </div>
                <div class="col-sm-6 rightAlign">
                  ( Amount in Rs.)
                </div>
              </div>
            </div>
            <div class="box-body">
              <table class="detailCheckTable" style="margin: 0;">
                <tbody>
                  <!-- Show Expenditure Total -->
                  <tr>
                    <td class="w-15" style="width: 30%;">
                      <label>Expenditure Total</label>
                    </td>
                    <td class="w-10">
                      <input class="BUnderLine text-right" matInput
                        value="{{ directiveObject.totalexpenditureAmount(DetailPostingDataSource.data) | number:'1.2-2'}}"
                        readonly>
                    </td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    <td class="w-15" style="width: 30%;">
                      <label>Opening Balance</label>
                    </td>
                    <td class="w-10">
                      <input class="BUnderLine text-right" matInput value="{{ openingBalance | number:'1.2-2'}}"
                        readonly>
                    </td>

                  </tr>
                  <!-- Show Deduction Total -->
                  <tr>
                    <td class="w-15" style="width: 30%;">
                      <label>Deduction Total</label>
                    </td>
                    <td class="w-10">
                      <input class="BUnderLine text-right" matInput formControlName="deductionTotal" readonly>
                    </td>&nbsp;&nbsp;&nbsp;&nbsp;
                    <td class="w-15" style="width: 30%;">
                      <label>New LC</label>
                    </td>
                    <td class="w-10">
                      <input class="BUnderLine text-right" matInput value=" {{ newBalance | number:'1.2-2'}}" readonly>

                    </td>

                  </tr>
                  <!-- Show Net Total -->
                  <tr>
                    <td class="w-15" style="width: 30%;">
                      <label>Net Total</label>
                    </td>
                    <td class="w-10">
                      <input class="BUnderLine text-right" matInput [value]= "netTotal()" readonly>
                    </td>&nbsp;&nbsp;&nbsp;&nbsp;

                    <td class="w-15" style="width: 30%;">
                      <label>Expenditure Total</label>
                    </td>
                    <td class="w-10">
                      <input class="BUnderLine text-right" matInput
                        value="{{ directiveObject.totalexpenditureAmount(DetailPostingDataSource.data) | number:'1.2-2'}}"
                        readonly>
                    </td>

                  </tr>
                  <tr>
                    <td class="w-15" style="width: 30%;">
                      <label>Net Total ( in words)</label>
                    </td>
                    <td class="w-10">
                      <input class="BUnderLine text-right" matInput [value]="inWordsVariable"
                        readonly>
                    </td>&nbsp;&nbsp;&nbsp;&nbsp;

                    <td class="w-15" style="width: 30%;">
                      <label>Closing Balance</label>
                    </td>
                    <td class="w-10">
                      <input class="BUnderLine text-right" matInput [value]="closingBalance()" readonly>
                    </td>

                  </tr>
                </tbody>
              </table>
            </div>
          </div>

          <!-- Expanse Summary Ends -->
        </form>

        <!-- Action Buttons Starts -->
        <div class="form-action-button">

          <button type="submit" mat-raised-button color="primary" title="Save As Draft" (click)="deductionSave()"
            [disabled]="DetailPostingDataSource.data.length == 0 || !chequeEpaymentsavedFlag">
            <i class="material-icons" title="Save As Draft" aria-hidden="true">
              save
            </i>
            Save as Draft
          </button>

          <button mat-raised-button type="submit" class="green" title="Submit" (click)="submit()"
            [disabled]="DetailPostingDataSource.data.length == 0  || !chequeEpaymentsavedFlag">
            <i class="material-icons" title="Submit" aria-hidden="true">
              done
            </i>
            Submit
          </button>

          <button type="reset" mat-raised-button color="accent" title="Reset" (click)="resetDeductionForm()">
            <i class="material-icons" title="Reset" aria-hidden="true">
              restore
            </i>
            Reset
          </button>

          <button type="button" mat-raised-button color="warn" title="Listing" (click)="gotoListing()"
            routerLinkActive="router-link-active">
            <i class="material-icons" title="Listing" aria-hidden="true">
              list
            </i>
            Listing
          </button>

          <button type="button" mat-raised-button class="btnClose" title="Close"
            (click)="directiveObject.goToDashboard()">
            <i class="material-icons" title="Close" aria-hidden="true">
              close
            </i>
            Close
          </button>
        </div>
        <!-- Action Buttons Ends -->


      </mat-tab>
      <!-- Mat Tab for List of Deductions End  -->

      <!-- Mat Tab for Attachments Starts -->
      <mat-tab [disabled]="!hdrId">
        <ng-template mat-tab-label>
          Attachment
        </ng-template>
        <table mat-table [dataSource]="dataSourceBrowse" width="100%" id="browseTable">
          <ng-container matColumnDef="position">
            <th mat-header-cell *matHeaderCellDef scope="row">Sr. No.</th>
            <td mat-cell *matCellDef="let item; let i = index" class="centerAlign">
              {{ i + 1 }}
            </td>
          </ng-container>
          <ng-container matColumnDef="attachmentTypeId">
            <th mat-header-cell *matHeaderCellDef>Attachment Type <span class="star">*</span></th>
            <td mat-cell *matCellDef="let item;let i= index;">
              <mat-select [disabled]="item.documentId  || this.mode === 'view'" placeholder="Attachment Type" required
                [(ngModel)]="item.attachmentTypeId" (selectionChange)="onAttachmentTypeChange(item,i)">
                <mat-option>
                  <ngx-mat-select-search [formControl]="attachmentTypeCodeCtrl"
                    [placeholderLabel]="'Find Attachment Type...'"
                    [noEntriesFoundLabel]="'no matching Attachment Type found'">
                  </ngx-mat-select-search>
                </mat-option>

                <mat-option
                  *ngFor="let AT of attachmentTypeList | filterSelectInput : attachmentTypeCodeCtrl.value : 'name'"
                  [value]="AT.id">
                  {{AT.name}}
                </mat-option>
              </mat-select>
              <!-- {{item.attachmentTypeName}} -->
            </td>
          </ng-container>
          <ng-container matColumnDef="fileName">
            <th mat-header-cell *matHeaderCellDef>File name <span class="star">*</span></th>
            <td mat-cell *matCellDef="let item">
              <mat-form-field floatLabel="never">
                <input [disabled]="item.documentId || this.mode === 'view'" matInput [value]="item.fileName"
                  maxlength="50" [(ngModel)]="item.fileName">
              </mat-form-field>
            </td>
          </ng-container>
          <ng-container matColumnDef="browse">
            <th mat-header-cell *matHeaderCellDef>Browse File <span class="star">*</span></th>
            <td mat-cell *matCellDef="let item;let i= index" class="centerAlign">
              <button [disabled]="item.documentId || this.mode === 'view'" type="button" (click)="openFileSelector(i)"
                class="btn-browse">
                Browse Files
              </button>
            </td>
          </ng-container>
          <ng-container matColumnDef="uploadedFileName">
            <th mat-header-cell *matHeaderCellDef>Uploaded file name <span class="star">*</span></th>
            <td mat-cell *matCellDef="let item;let i = index">
              <span *ngIf="item.uploadedFileName">{{item.uploadedFileName}}</span>
              <span>
                <i *ngIf="item.uploadedFileName && !item.documentId" class="material-icons closesmall"
                  (click)="removeUploadUserFile(item, i)" title="Delete File" aria-hidden="true">close</i>
              </span>

            </td>
          </ng-container>
          <ng-container matColumnDef="userName">
            <th mat-header-cell *matHeaderCellDef>Uploaded By</th>
            <td mat-cell *matCellDef="let item">
              <mat-label>{{item.userName}}</mat-label>
            </td>
          </ng-container>
          <ng-container matColumnDef="action">
            <th mat-header-cell *matHeaderCellDef style="width: 10%;">Action</th>
            <td mat-cell *matCellDef="let item; let i= index">
              <table class="iconTable">
                <tbody>
                  <tr>

                    <td width="auto">
                      <i class="material-icons plus delete"
                        *ngIf="dataSourceBrowse && dataSourceBrowse.data && (dataSourceBrowse.data.length > 1 || item.documentId) && this.mode !=='view'"
                        (click)="deleteUploadedAttachment(item, i)">
                        delete
                      </i>
                    </td>
                    <td width="auto">
                      <i class="material-icons plus view-icon" title="Download" *ngIf="item &&
                        item.documentId" (click)="downLoadUploadedAttachment(item)">vertical_align_bottom
                      </i>
                    </td>
                    <td width="auto">
                      <i class="material-icons plus view-icon" title="View" *ngIf="item &&
                        item.documentId && item.isView"
                        (click)="viewUploadedAttachment(item,$event)">remove_red_eye</i>
                    </td>


                    <td width="auto">
                      <i class="material-icons plus add" *ngIf="dataSourceBrowse &&
                                                dataSourceBrowse.data && 
                                                (i == dataSourceBrowse.data.length - 1) && 
                                                dataSourceBrowse.data.length < maxAttachment && this.mode !=='view'"
                        (click)="addNewFileRow()">
                        add
                      </i>
                    </td>
                  </tr>
                </tbody>
              </table>
            </td>
          </ng-container>
          <tr mat-header-row *matHeaderRowDef="displayedBrowseColumns"></tr>
          <tr mat-row *matRowDef="let row; columns:
                        displayedBrowseColumns;"></tr>
        </table>
        <input type="file" #attachment id="fileBrowse" style="visibility: hidden;" (change)="onFileSelection($event)" />

        <div class="legend">

          1. Total File size should be under 2MB<br> 2. File type supported are: 'jpg', 'jpeg', 'png', 'pdf',

          JPG, JPEG, PNG, PDF.

        </div>
        <!-- Action Buttons Starts -->
        <div class="form-action-button">
          <button type="button" mat-raised-button color="primary" *ngIf="this.mode !=='view'"
            (click)="saveAttachmentTab()">
            <i class="material-icons" aria-hidden="true" title="Save">
              save
            </i>
            Upload
          </button>

          <button type="button" mat-raised-button color="warn" (click)="gotoListing()">
            <i class="material-icons" aria-hidden="true" title="Listing">
              list
            </i>
            Listing
          </button>
          <button type="button" mat-raised-button class="btnClose" (click)="directiveObject.goToDashboard()">
            <i class="material-icons" title="Budget dashboard">
              close
            </i>
            Cancel
          </button>
        </div>
        <!-- Action Buttons Ends -->
      </mat-tab>
      <!-- Mat Tab for Attachments Ends -->
    </mat-tab-group>
  </div>
</div>