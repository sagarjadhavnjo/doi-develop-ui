<div class="container">
    <div class="form-wrapper">
  
      <!-- heading section -->
      <div class="heading-section ng-star-inserted">
        <div>Surveyor Master</div>
        <div class="font-heading"><strong>Reference Number:</strong> 19-20/DOI/SM/001</div>
        <div class="font-heading"><strong>Reference Date:</strong> {{ todayDate | date: 'dd-MMM-yyyy HH:mm'}}
        </div>
      </div>
  
      <!-- navigation start -->
      <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
          <li class="breadcrumb-item"><a href="#">Home</a></li>
          <li class="breadcrumb-item " aria-current="page">DOI </li>
          <li class="breadcrumb-item active" aria-current="page">Surveyor Master</li>
        </ol>
      </nav>
      <!-- navigation ends -->
  
  
  
      <div class="panel-group">
        <mat-tab-group mat-stretch-tabs>
          <mat-tab label="Surveyor Master">
  
            <!-- Party Master  Form-->
            <form [formGroup]="surveyorMasterForm">
  
              <!-- Party Master -->
              <div class="box box-primary">
                <div class="box-header">Surveyor Details</div>
                <div class="box-body">
  
                  <div class="row">
  
                    <!-- surveyor name -->
                    <div class="col-sm-3">
                      <mat-form-field>
                        <input matInput formControlName="surveyorName" placeholder="Surveyor Name" required>
                        <div class="error-wrapper"
                          *ngIf="surveyorMasterForm.controls.surveyorName.touched && surveyorMasterForm.controls.surveyorName.errors">
                          <mat-error *ngIf="surveyorMasterForm.controls.surveyorName.errors.required">
                            {{ errorMessage.SURVEYOR_NAME }}
                          </mat-error>
                        </div>
                      </mat-form-field>
                    </div>
  
                    <!-- surveyor firm name -->
                    <div class="col-sm-3">
                      <mat-form-field>
                        <input matInput formControlName="surveyorFirmName" placeholder="Surveyor Firm Name" required>
                        <div class="error-wrapper"
                          *ngIf="surveyorMasterForm.controls.surveyorFirmName.touched && surveyorMasterForm.controls.surveyorFirmName.errors">
                          <mat-error *ngIf="surveyorMasterForm.controls.surveyorFirmName.errors.required">
                            {{ errorMessage.SURVEYOR_FIRM_NAME }}
                          </mat-error>
                        </div>
                      </mat-form-field>
                    </div>
  
                    <!-- party address -->
                    <div class="col-sm-3">
                      <mat-form-field>
                        <input matInput formControlName="partyAddress" placeholder="Address" required>
                        <div class="error-wrapper"
                          *ngIf="surveyorMasterForm.controls.partyAddress.touched && surveyorMasterForm.controls.partyAddress.errors">
                          <mat-error *ngIf="surveyorMasterForm.controls.partyAddress.errors.required">
                            {{ errorMessage.ADDRESS }}
                          </mat-error>
                        </div>
                      </mat-form-field>
                    </div>
  
  
                    <!-- District -->
                    <div class="col-sm-3">
                      <mat-form-field class="full-width">
                        <mat-select formControlName="district" placeholder="District" (selectionChange)="selectDistrict()"
                          required>
                          <mat-option>
                            <ngx-mat-select-search [formControl]="districtCtrl" [placeholderLabel]="'Find District...'"
                              [noEntriesFoundLabel]="'No matching District found'">
                            </ngx-mat-select-search>
                          </mat-option>
                          <mat-option *ngFor="let item of districtList |
                        filterSelectInput:districtCtrl.value" [value]="item.value" matTooltip="{{item.viewValue}}">
                            {{item.viewValue}}
                          </mat-option>
                        </mat-select>
                        <div class="error-wrapper"
                          *ngIf="surveyorMasterForm.controls.district.touched && surveyorMasterForm.controls.district.errors">
                          <mat-error *ngIf="surveyorMasterForm.controls.district.errors.required">
                            {{ errorMessage.DISTRICT }}
                          </mat-error>
                        </div>
                      </mat-form-field>
                    </div>
  
  
                    <!-- Taluka -->
                    <div class="col-sm-3">
                      <mat-form-field>
                        <mat-select name='taluka' formControlName='taluka' placeholder='Taluka' required>
                          <mat-option>
                            <ngx-mat-select-search [formControl]='talukaCtrl' [placeholderLabel]="'Select Taluka ...'"
                              [noEntriesFoundLabel]="'no matching Taluka found'">
                            </ngx-mat-select-search>
                          </mat-option>
                          <mat-option
                            *ngFor="let item of talukaNameList | filterSelectInput : talukaCtrl.value : 'viewValue'"
                            [value]="item.value" matTooltip="{{item.viewValue}}">
                            {{item.viewValue}}
                          </mat-option>
                        </mat-select>
                        <div class="error-wrapper"
                          *ngIf="surveyorMasterForm.controls.taluka.touched && surveyorMasterForm.controls.taluka.errors">
                          <mat-error *ngIf="surveyorMasterForm.controls.taluka.errors.required">
                            {{ errorMessage.TALUKA }}
                          </mat-error>
                        </div>
                      </mat-form-field>
                    </div>
  
                    <!-- city -->
                    <div class="col-sm-3">
                      <mat-form-field>
                        <input matInput formControlName="city" placeholder="City" required>
                        <div class="error-wrapper"
                          *ngIf="surveyorMasterForm.controls.city.touched && surveyorMasterForm.controls.city.errors">
                          <mat-error *ngIf="surveyorMasterForm.controls.city.errors.required">
                            {{ errorMessage.CITY }}
                          </mat-error>
                        </div>
                      </mat-form-field>
                    </div>
  
                    <!-- pin code -->
                    <div class="col-sm-3">
                      <mat-form-field>
                        <input matInput formControlName="pinCode" placeholder="Pincode" maxlength="6" numbersOnly
                          required>
                        <div class="error-wrapper"
                          *ngIf="surveyorMasterForm.controls.pinCode.touched && surveyorMasterForm.controls.pinCode.errors">
                          <mat-error *ngIf="surveyorMasterForm.controls.pinCode.errors.required">
                            {{ errorMessage.PIN_CODE }}
                          </mat-error>
                        </div>
                      </mat-form-field>
                    </div>
  
                    <!-- contact no -->
                    <div class="col-sm-3">
                      <mat-form-field>
                        <input matInput formControlName="contactNo" placeholder="Contact No." numbersOnly maxlength="12"
                          required>
                        <div class="error-wrapper"
                          *ngIf="surveyorMasterForm.controls.contactNo.touched && surveyorMasterForm.controls.contactNo.errors">
                          <mat-error *ngIf="surveyorMasterForm.controls.contactNo.errors.required">
                            {{ errorMessage.CONTACT_NO }}
                          </mat-error>
                        </div>
                      </mat-form-field>
                    </div>
  
                    <!-- email id -->
                    <div class="col-sm-3">
                      <mat-form-field class="full-width">
                        <input matInput type="text" placeholder="Email ID" formControlName="email" required>
                        <div class="error-wrapper"
                          *ngIf="surveyorMasterForm.controls.email.touched && surveyorMasterForm.controls.email.errors">
                          <mat-error *ngIf="surveyorMasterForm.controls.email.errors.required">
                            {{ errorMessage.EMAIL_ID }}
                          </mat-error>
                        </div>
                      </mat-form-field>
                    </div>
  
                    <!-- adhar no -->
                    <div class="col-sm-3">
                      <mat-form-field class="full-width">
                        <input matInput type="text" placeholder="Aadhar No" formControlName="adharNo" maxlength="12"
                          numbersOnly>
                      </mat-form-field>
                    </div>
  
                    <!-- pan card -->
                    <div class="col-sm-3">
                      <mat-form-field class="full-width">
                        <input matInput type="text" placeholder="PAN Card No" formControlName="panCard" maxlength="10"
                          required>
                        <div class="error-wrapper"
                          *ngIf="surveyorMasterForm.controls.panCard.touched && surveyorMasterForm.controls.panCard.errors">
                          <mat-error *ngIf="surveyorMasterForm.controls.panCard.errors.required">
                            {{ errorMessage.PAN_CARD }}
                          </mat-error>
                        </div>
                      </mat-form-field>
                    </div>
  
                    <div class="col-sm-3">
                      <mat-form-field class="full-width">
                        <input matInput type="text" placeholder="License No" formControlName="licNo" maxlength="10"
                          required>
                        <div class="error-wrapper"
                          *ngIf="surveyorMasterForm.controls.licNo.touched && surveyorMasterForm.controls.licNo.errors">
                          <mat-error *ngIf="surveyorMasterForm.controls.licNo.errors.required">
                            {{ errorMessage.LICE_NO }}
                          </mat-error>
                        </div>
                      </mat-form-field>
                    </div>
  
                  </div>
                </div>
              </div>
              <!-- Party Master End -->
            </form>
  
            <!-- Bank Details -->
            <div class="box box-primary">
              <div class="box-header">Bank Details</div>
              <div class="box-body">
                <div class="row">
  
                  <div class="col-sm-12">
                    <div class="mat-elevation-z8 mt-2">
                      <!-- table start -->
                      <table mat-table [dataSource]="dataSourceBankDetails" matSort aria-describedby="bankDetails">
  
                        <!-- bank name -->
                        <ng-container matColumnDef="bankName">
                          <th mat-header-cell *matHeaderCellDef scope="row">Bank Name</th>
                          <td mat-cell *matCellDef="let element">
  
                            <mat-form-field class="example-full-width">
                              <mat-select [(ngModel)]="element.bankName" [ngModelOptions]="{standalone: true}">
                                <mat-option>
                                  <ngx-mat-select-search [formControl]="bankNameCtrl"
                                    [placeholderLabel]="'Find Bank Name...'"
                                    [noEntriesFoundLabel]="'no matching Bank Name found'">
                                  </ngx-mat-select-search>
                                </mat-option>
                                <mat-option *ngFor="let item of bankNameList | filterSelectInput: bankNameCtrl.value"
                                  [value]="item.value">
                                  {{item.viewValue}}
                                </mat-option>
                              </mat-select>
                            </mat-form-field>
                          </td>
                        </ng-container>
  
                        <!-- branch name -->
                        <ng-container matColumnDef="branchName">
                          <th mat-header-cell *matHeaderCellDef scope="row">Branch Name</th>
                          <td mat-cell *matCellDef="let element">
  
                            <mat-form-field class="example-full-width">
                              <mat-select [(ngModel)]="element.branchName" [ngModelOptions]="{standalone: true}">
                                <mat-option>
                                  <ngx-mat-select-search [formControl]="branchNameCtrl"
                                    [placeholderLabel]="'Find Branch Name...'"
                                    [noEntriesFoundLabel]="'no matching Branch Name found'">
                                  </ngx-mat-select-search>
                                </mat-option>
                                <mat-option *ngFor="let item of branchNameList | filterSelectInput: branchNameCtrl.value"
                                  [value]="item.value">
                                  {{item.viewValue}}
                                </mat-option>
                              </mat-select>
                            </mat-form-field>
                          </td>
                        </ng-container>
  
                        <!-- ifsc code -->
                        <ng-container matColumnDef="ifscCode">
                          <th mat-header-cell *matHeaderCellDef scope="row">IFSC Code</th>
                          <td mat-cell *matCellDef="let element">
                            <mat-form-field class="example-full-width">
                              <input matInput [(ngModel)]="element.ifscCode" [ngModelOptions]="{standalone: true}">
                            </mat-form-field>
                          </td>
                        </ng-container>
  
  
                        <!--  account no -->
                        <ng-container matColumnDef="accountNo">
                          <th mat-header-cell *matHeaderCellDef scope="row">Account No.</th>
                          <td mat-cell *matCellDef="let element">
                            <mat-form-field class="example-full-width">
                              <input matInput [(ngModel)]="element.accountNo" [ngModelOptions]="{standalone: true}">
                            </mat-form-field>
                          </td>
                        </ng-container>
  
                        <!-- payment prefered -->
                        <ng-container matColumnDef="paymentPrefered">
                          <th mat-header-cell *matHeaderCellDef scope="row">Payment Preferred</th>
                          <td mat-cell *matCellDef="let element">
  
                            <mat-form-field class="example-full-width">
                              <mat-select [(ngModel)]="element.paymentPrefered" [ngModelOptions]="{standalone: true}">
                                <mat-option>
                                  <ngx-mat-select-search [formControl]="paymentPreferedCtrl"
                                    [placeholderLabel]="'Find Payment Preferred...'"
                                    [noEntriesFoundLabel]="'no matching Payment Preferred found'">
                                  </ngx-mat-select-search>
                                </mat-option>
                                <mat-option
                                  *ngFor="let item of paymentPreferedList | filterSelectInput: paymentPreferedCtrl.value"
                                  [value]="item.value">
                                  {{item.viewValue}}
                                </mat-option>
                              </mat-select>
                            </mat-form-field>
                          </td>
                        </ng-container>
  
  
                        <!-- action -->
                        <ng-container matColumnDef="action">
                          <th mat-header-cell *matHeaderCellDef scope="row">Action</th>
                          <td mat-cell *matCellDef="let item; let i = index" class="centerAlign">
                            <table class="iconTable" aria-describedby="actionBtn">
                              <tbody>
                                <tr>
                                  <td width="30">
                                    <i class="material-icons plus add" aria-hidden="true"
                                      *ngIf="dataSourceBankDetails && dataSourceBankDetails.data && (i == dataSourceBankDetails.data.length - 1)"
                                      (click)="addBankDetails()">
                                      add
                                    </i>
                                  </td>
                                  <td width="30">
                                    <i class="material-icons plus delete" aria-hidden="true"
                                      *ngIf="dataSourceBankDetails && dataSourceBankDetails.data && dataSourceBankDetails.data.length > 1"
                                      (click)="deleteColumn(dataSourceBankDetails,i)">
                                      delete
                                    </i>
                                  </td>
                                </tr>
                              </tbody>
                            </table>
                          </td>
                          <td mat-footer-cell *matFooterCellDef></td>
                        </ng-container>
  
                        <!-- Header Section Of table -->
                        <tr mat-header-row *matHeaderRowDef="displayedColumns2"></tr>
                        <!-- Data Fetch From .TS File to table -->
                        <tr mat-row *matRowDef="let row; let i = index;columns:displayedColumns2"></tr>
  
                      </table>
                      <!-- table end -->
  
                      <!-- paginator -->
                      <mat-paginator [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons></mat-paginator>
                    </div>
                  </div>
  
                </div>
              </div>
            </div>
            <!-- Bank Details end -->
  
            <!-- common action button -->
            <div class="form-action-button">
  
              <button mat-raised-button type="submit" class="green" title="Submit" (click)="onSubmit()">
                <i class="material-icons">
                  done
                </i>
                Submit
              </button>
  
              <button type="button" mat-raised-button color="accent" title="Reset" (click)="onReset()">
                <i class="material-icons" aria-hidden="true">
                  restore
                </i>
                Reset
              </button>
  
              <button type="button" mat-raised-button (click)="goToListing()" color="warn" title="Listing">
                <i class="material-icons" aria-hidden="true" title="Listing">
                  list
                </i>
                Listing
              </button>
  
              <button type="button" mat-raised-button (click)="onClose()" class="btnClose" title="Close">
                <i class="material-icons" aria-hidden="true" title="Close">
                  close
                </i>
                Close
              </button>
  
            </div>
            <!-- common action button end -->
  
          </mat-tab>
  
          <!-- attachment tab -->
          <mat-tab label="Attachments">
            <app-common-attachment [attachemntValue]="attachmentTypeCode"></app-common-attachment>
  
            <!-- action button -->
            <div class="form-action-button">
  
              <button type="submit" mat-raised-button color="primary">
                <i class="material-icons" aria-hidden="true" title="Upload">
                  publish
                </i>
                Upload
              </button>
  
              <button type="button" mat-raised-button budget-list (click)="goToListing()" color="warn" title="Listing">
                <i class="material-icons" aria-hidden="true" title="Listing">
                  list
                </i>
                Listing
              </button>
  
              <button type="button" mat-raised-button (click)="onClose()" class="btnClose" title="Close">
                <i class="material-icons" aria-hidden="true" title="Close">
                  close
                </i>
                Close
              </button>
  
            </div>
            <!-- action button end -->
  
          </mat-tab>
          <!-- attachment tab end -->
  
          <!-- surveyor records -->
          <mat-tab label="Allotment Details">
            <form [formGroup]="surveyorRecordsForm">
              <!-- <div class="box box-primary">
                <div class="box-header">Surveyor Records</div>
                <div class="box-body"> -->
  
                  <!-- <div class="row">
  
                    <div class="col-sm-3">
                      <mat-form-field>
                        <input matInput formControlName="appointmentDetails" placeholder="Appointment Details">
                      </mat-form-field>
                    </div>
  
                    <div class="col-sm-3">
                      <mat-form-field>
                        <input matInput formControlName="surveyDetails" placeholder="Surveyor Details">
                      </mat-form-field>
                    </div>
  
                    <div class="col-sm-3">
                      <mat-form-field>
                        <input matInput formControlName="surveyReports" placeholder="Survey Reports">
                      </mat-form-field>
                    </div>
  
                  </div> -->
                
                  <div class="mat-elevation-z8 table-responsive mt-2">
                    <table mat-table [dataSource]="dataSource" width="100%" matSort aria-describedby="listinginwardscreen">
  
                      <ng-container matColumnDef="srno">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header scope="row">Sr No.</th>
                        <td mat-cell *matCellDef="let element; let i = index">
                          {{ i + 1 }}
                        </td>
                      </ng-container>
  
                      <ng-container matColumnDef="brNo">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header scope="row">Branch Name</th>
                        <td mat-cell *matCellDef="let element; let i = index">
                          {{ element.brNo }}
                        </td>
                      </ng-container>
  
                      <ng-container matColumnDef="clNo">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header scope="row">Claim No</th>
                        <td mat-cell *matCellDef="let element; let i = index">
                          {{ element.clNo }}
                        </td>
                      </ng-container>
  
                      <ng-container matColumnDef="clDate">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header scope="row">Claim Date</th>
                        <td mat-cell *matCellDef="let element; let i = index">
                          {{ element.clDate }}
                        </td>
                      </ng-container>
  
                      <ng-container matColumnDef="clAmt">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header scope="row">Claim Amount</th>
                        <td mat-cell *matCellDef="let element; let i = index" class="rightAlign">
                          {{ element.clAmt }}
                        </td>
                      </ng-container>
  
                      <ng-container matColumnDef="allotDate">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header scope="row">Allotment date</th>
                        <td mat-cell *matCellDef="let element; let i = index">
                          {{ element.allotDate }}
                        </td>
                      </ng-container>
  
                      <ng-container matColumnDef="surveryorClaStat">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header scope="row">Surveyor Claim Status</th>
                        <td mat-cell *matCellDef="let element; let i = index">
                          {{ element.surveryorClaStat }}
                        </td>
                      </ng-container>
  
                      <ng-container matColumnDef="surveryorReportSub">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header scope="row">Surveyor Report Submitted</th>
                        <td mat-cell *matCellDef="let element; let i = index">
                          {{ element.surveryorReportSub }}
                        </td>
                      </ng-container>
  
                      <ng-container matColumnDef="surveryorClaimAmt">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header scope="row">Surveyor Claim Settlement Amount</th>
                        <td mat-cell *matCellDef="let element; let i = index" class="rightAlign">
                          {{ element.surveryorClaimAmt }}
                        </td>
                      </ng-container>
  
                      <ng-container matColumnDef="surveryorFee">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header scope="row">Surveyor Fee Amount</th>
                        <td mat-cell *matCellDef="let element; let i = index" class="rightAlign">
                          {{ element.surveryorFee }}
                        </td>
                      </ng-container>
  
                      <ng-container matColumnDef="action">
                        <th mat-header-cell *matHeaderCellDef scope="row">Action</th>
                        <td mat-cell *matCellDef="let element; let i = index" class="action-btn-i centerAlign">
                          <a><i class="material-icons plus view-icon" title="Edit" aria-hidden="true">edit</i></a>
                        </td>
                      </ng-container>
  
                      <!-- Header Section Of table -->
                      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                      <!-- Data Fetch From .TS File to table -->
                      <tr mat-row *matRowDef="let row; let i = index; columns: displayedColumns"></tr>
                    </table>
  
                    <mat-paginator [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons></mat-paginator>
  
                  </div>
  
                <!-- </div>
              </div> -->
            </form>
          </mat-tab>
  
        </mat-tab-group>
  
      </div>
    </div>
  </div>